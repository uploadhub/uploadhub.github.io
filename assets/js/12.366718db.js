(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{320:function(t,s,n){"use strict";n.r(s);var a=n(7),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-数据库概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据库概念"}},[t._v("#")]),t._v(" 1. 数据库概念")]),t._v(" "),s("p",[s("strong",[t._v("问：什么是数据库？")]),t._v("\n答：存储数据的仓库")]),t._v(" "),s("p",[s("strong",[t._v("问：为什么要有数据库？")]),t._v("\n答：首先数据是存储在内存里运行的，如果一断电的话，数据就会丢失，所以可以将数据存储到硬盘（持久化），但是硬盘没有联网，所以有了可以联网也可以存储数据的数据库。")]),t._v(" "),s("p",[s("strong",[t._v("问：数据库能做什么？")]),t._v("\n答：数据库可以存储数据，并且这些数据还可以连接网络，也就是和硬盘相比，可以不用到处携带，就像是网盘。")]),t._v(" "),s("p",[s("strong",[t._v("问：数据库的服务器和客户端")]),t._v("\n答：值得注意的是数据库它也是分为服务器和客户端的")]),t._v(" "),s("blockquote",[s("p",[t._v("服务器：保存数据的\n客户端：操作和存储数据的(CRUD)")])]),t._v(" "),s("p",[s("strong",[t._v("问：关系型和非关系型数据库的区别？")])]),t._v(" "),s("p",[t._v("总而言之就是："),s("strong",[t._v("关系型的数据库是创建表格, 非关系型的是可以创建任意多个文档")]),t._v("。")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("1.数据存储方式不同")]),t._v("\n关系型和非关系型数据库的主要差异是数据存储的方式。关系型数据天然就是表格式的，因此存储在数据表的行和列中。数据表可以彼此关联协作存储，也很容易提取数据。")]),t._v(" "),s("p",[t._v("与其相反，非关系型数据不适合存储在数据表的行和列中，而是大块组合在一起。非关系型数据通常存储在数据集中，就像文档、键值对或者图结构。你的数据及其特性是选择数据存储和提取方式的首要影响因素。")]),t._v(" "),s("p",[s("strong",[t._v("2.扩展方式不同")])]),t._v(" "),s("p",[t._v("SQL和NoSQL数据库最大的差别可能是在扩展方式上，要支持日益增长的需求当然要扩展。\n要支持更多并发量，SQL数据库是纵向扩展，也就是说提高处理能力，使用速度更快速的计算机，这样处理相同的数据集就更快了。")]),t._v(" "),s("p",[t._v("因为数据存储在关系表中，操作的性能瓶颈可能涉及很多个表，这都需要通过提高计算机性能来客服。虽然SQL数据库有很大扩展空间，但最终肯定会达到纵向扩展的上限。而NoSQL数据库是横向扩展的。")]),t._v(" "),s("p",[t._v("而非关系型数据存储天然就是分布式的，NoSQL数据库的扩展可以通过给资源池添加更多普通的数据库服务器(节点)来分担负载。")]),t._v(" "),s("p",[s("strong",[t._v("3.对事务性的支持不同")])]),t._v(" "),s("p",[t._v("如果数据操作需要高事务性或者复杂数据查询需要控制执行计划，那么传统的SQL数据库从性能和稳定性方面考虑是你的最佳选择。SQL数据库支持对事务原子性细粒度控制，并且易于回滚事务。")])]),t._v(" "),s("h2",{attrs:{id:"_2-mongodb简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-mongodb简介"}},[t._v("#")]),t._v(" 2. MongoDB简介")]),t._v(" "),s("ol",[s("li",[t._v("MongoDB是一个NoSQL的文档型的数据库")]),t._v(" "),s("li",[t._v("MongoDB数据库中存储的数据的基本单位就是文档，MongoDB中存储的就是文档，所谓文档其实就是一个“JSON”")]),t._v(" "),s("li",[t._v("MongoDB中的“JSON”我们称为BSON，比普通的JSON的功能要更加的强大")]),t._v(" "),s("li",[t._v("MongoDB数据库使用的是JavaScript进行操作的，在MongoDB含有一个对ES标准实现的引擎，")]),t._v(" "),s("li",[t._v("在MongoDB中所有ES中的语法中都可以使用")])]),t._v(" "),s("p",[s("strong",[t._v("MongoDB的优点")])]),t._v(" "),s("ol",[s("li",[t._v("可以快速开发web型应用，因为灵活，不用像关系型数据库一样需要建表")]),t._v(" "),s("li",[t._v("MongoDB存储的是文档（document），文档内存储的是类似json的结构，所谓json就是字符串数组")])]),t._v(" "),s("h2",{attrs:{id:"_3-安装启动mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装启动mongodb"}},[t._v("#")]),t._v(" 3. 安装启动MongoDB")]),t._v(" "),s("p",[t._v("安装MongoDB，去官网下载并安装，随后将bin文件设置成环境变量path的变量。设置完毕后，还需设置自动启动MongoDB数据库的方式")]),t._v(" "),s("p",[s("strong",[t._v("参考链接")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/zhoulifeng/p/9429597.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB安装配置教程"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_4-基本结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-基本结构"}},[t._v("#")]),t._v(" 4. 基本结构")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("概念")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("数据库（database）")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("用来存储集合的，而且数据库也有分大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("集合（collection）")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("集合类似于数组，是用于存放文档的")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("文档（document）")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("文档是MongoDB数据库中最小的单位，我们要操作的目标就是文档")])])])]),t._v(" "),s("p",[t._v("MongoDB关系: "),s("strong",[t._v("数据库（database） > 集合（collection）> 文档（document）")])]),t._v(" "),s("p",[t._v("注意："),s("strong",[t._v("在MongoDB中，数据库和集合都不需要手动创建")]),t._v("。当我们创建文档时，如果文档所在的集合或数据库不存在，则会自动创建数据库和集合")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/MongoDB%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("h2",{attrs:{id:"_5-常见指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-常见指令"}},[t._v("#")]),t._v(" 5. 常见指令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("net start MongoDB")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("开启服务器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("net stop MongoDB")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("关闭服务器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mongo")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("开启服务器后，在终端输入mongo便可以连接上数据库，启动客户端")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("show dbs"),s("br"),t._v("show databases")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("显示当前的所有数据库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("use 数据库名")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("进入到指定的数据库中")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("db")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("db表示的是当前所处的数据库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("show collections")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("显示数据库中所有的集合")])])])]),t._v(" "),s("h2",{attrs:{id:"_6-相关crud操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-相关crud操作"}},[t._v("#")]),t._v(" 6. 相关CRUD操作")]),t._v(" "),s("p",[t._v("相关API具体内容查看官方文档:\thttps://mongoosejs.com/")]),t._v(" "),s("p",[t._v("核心操作：增insert、删remove、查: find、改: update")]),t._v(" "),s("h3",{attrs:{id:"_6-1-增加-insert"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-增加-insert"}},[t._v("#")]),t._v(" 6.1 增加(insert)")]),t._v(" "),s("blockquote",[s("p",[t._v("db.集合名.insert(document)：表示增加一个或多个文档")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"孙悟空"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"花果山"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t表示向 集合名为piyou插入了文档, 文档内容是对象。\n\t集合名是自己创建的，想用什么名称就用什么。\n*/")]),t._v("\n\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"猪八戒"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"高老庄"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t{name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"沙和尚"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"流沙河"')]),t._v("}\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t可以注意到: 传递的数据是数组，数组内部是对象，其实对象就相当于文档，这就是插入了两个文档。\n*/")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("blockquote",[s("p",[t._v("db.集合名.insertOne(document,[callback]) ：表示插入一个文档，回调函数callback是可选的")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t表示向集合名为piyou的 插入了一个文档。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insertOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"唐僧"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"女儿国"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("blockquote",[s("p",[t._v("db.集合名.insertMany(doucment, [callback]);       表示插入多个文档")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t可以看到，用法是和insert是相差不多的。数组里面有对象，对象即是文档。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insertMany"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"白骨精"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age:"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("address:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"白骨洞"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"蜘蛛精"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" address:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"蜘蛛洞"')]),t._v("}\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_6-2-查找-find"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-查找-find"}},[t._v("#")]),t._v(" 6.2 查找(find)")]),t._v(" "),s("p",[t._v("要想查询上面插入的内容，便可调用查找的方法")]),t._v(" "),s("blockquote",[s("p",[t._v("db.集合名.find(condition);\t\t\t查询一个或多个文档 condition是查询条件\ndb.集合名.findOne(condition);\t    查询一个文档\ndb.集合名.findMany(condition)\t\t查询多个文档")])]),t._v(" "),s("p",[t._v("以下是查询语句和查询结果：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/07b6b3f79fe7418d9d6cefe729b67057.png",alt:"查询语句和查询结果"}})]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*这条语句表示的是查询age是18的文档。 值得注意的是，条件也是写在了对象里面，\n也是因为传入的值需要是json语句*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age:"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("执行结果：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/be643b64ab5a49b0a73b5a649b4d2bbf.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("p",[t._v("如果想要知道有多少个的时候，则可以使用")]),t._v(" "),s("blockquote",[s("p",[t._v("db.集合名.find(condition).count();\t使用count()来计数")])]),t._v(" "),s("p",[s("strong",[t._v("总结")])]),t._v(" "),s("ol",[s("li",[t._v("find()返回的是文档的数组，findOne()返回的就是一个文档")]),t._v(" "),s("li",[t._v("findMany()返回的也是数组内存放着文档的形式")]),t._v(" "),s("li",[t._v("find()的返回值还可以调用count(),用来获取符合条件的数量")])]),t._v(" "),s("h3",{attrs:{id:"_6-3-修改-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-修改-update"}},[t._v("#")]),t._v(" 6.3 修改(update)")]),t._v(" "),s("blockquote",[s("p",[t._v("db.集合名.update(condition,newObject);\t\t修改一个或多个文档\ndb.集合名.uodateOne(condition,newObject);\t修改一个文档\ndb.集合名.updateMany(condition, newObject);  修改多个文档\n"),s("strong",[t._v("condition")]),t._v(": 查询的条件\t\t"),s("strong",[t._v("newObject")]),t._v(": 需要修改的语句")])]),t._v(" "),s("p",[t._v("首先需要注意的是，在使用update()时，需要一个新的玩意加入，叫做"),s("strong",[t._v("修改操作符")]),t._v("，如下:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("修改操作符")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用处")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$set")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示需要设置指定的属性")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$unset")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示需要删除指定的属性")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$push")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示给数组添加一个新元素，因为文档内也会有数组，数组便会有数组元素")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$addToset")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示给数组添加一个新元素，和push的区别是，如果出现同名的数组元素，则不会再添加")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$gt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("大于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$gte")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("大于等于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$lt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("小于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$lte")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("小于等于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$or [{条件一,条件二}]")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示或的意思，符合条件一或者条件二")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$inc")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示自增，在原来数据的基础上对数据加减")])])])]),t._v(" "),s("p",[t._v("所以不能像下面这条语句这样使用，这样使用的话，会使用{age :18}覆盖掉{name:“猪八戒”…}这整条语句。")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"猪八戒"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {age:"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("39")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("执行结果，可以看到猪八戒这整条数据不见了，那么应该怎么操作呢？这时候修改操作符就派上用场了")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/af8d4da31a5d473c853a733aaaaa3f3a.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/*\t\n\t表示根据条件{name:"孙悟空"}, 找到了孙悟空的这个文档, 使用了$set(修改指定属性)\n\t这个修改操作符，将age修改成了29\n*/')]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"孙悟空"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{age:"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v("}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("执行结果：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/acb75591142b4ecf88e31ed2e63fb43d.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t表示使用 $unset(删除指定属性), 将唐僧的address的属性值给删掉了\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"唐僧"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {$unset:{address: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("执行结果,唐僧的address的值已经被删除了")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/b6573d58ddd542569cba09c48fe650da.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("h3",{attrs:{id:"_6-4-删除-remove"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-删除-remove"}},[t._v("#")]),t._v(" 6.4 删除(remove)")]),t._v(" "),s("blockquote",[s("p",[t._v("db.集合名.remove(condition)\t\t删除符合条件的一个或多个文档\ndb.集合名.deleteOne(condition)\t删除符合条件的一个文档\ndb.集合名.deleteMany(condition)\t删除符合条件的多个文档")]),t._v(" "),s("p",[t._v("db.集合名.remove(condition)  清空一个集合\ndb.集合名.drop()  删除一个集合\ndb.dropDatabase()  删除一个数据库")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t表示删除了符合 age为39 这个条件的一个或多个文档。\n\t也就是删掉了刚刚那个猪八戒的那条语句\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("piyou"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("39")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("执行结果：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/7d846effa5c149e3ada67d93e503392a.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("h3",{attrs:{id:"_6-5-相关练习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-相关练习"}},[t._v("#")]),t._v(" 6.5 相关练习")]),t._v(" "),s("p",[t._v("先看能不能读懂下面这条语句：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("persons"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    {\n\t    name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"大大白"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t    age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\t    hobby:{\n\t        music:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'new Boy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'云烟成雨'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'秋酿'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t        games:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'王者荣耀'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'和平精英'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'光遇'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t    }\n    }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {\n        name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小白"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        hobby:{\n            movies:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'大话西游'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'唐伯虎点秋香'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            games:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'王者荣耀'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'旅行青蛙'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'穿越火线'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        }\n    }\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("语句解释：\n向集合persons中插入一个数组，数组中有两个文档，文档内有一个hobby的文档，\n这个hobby文档被称作内嵌文档，然后hobby文档内有两个数组。")]),t._v(" "),s("p",[t._v("需求一：查询喜欢玩 王者荣耀 的人")]),t._v(" "),s("p",[t._v("分析:王者荣耀是存在于hobby中的games")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这是需要注意的知识点:如果查询的是内嵌文档可以使用 . 的方式查询，\n\t不过需要使用引号，这是因为mongodb的文档是json的缘故吧。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("persons"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hobby.games"')]),t._v(":"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王者荣耀"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("需求二: 插入20000条数据，有哪种是比较快捷的方式？\n方式一：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这是方式一，这种方式是需要调用insert语句20000次，效率会十分低下，那么可不可以，\n\t只调用一次insert语句呢？如果可以的话，应该怎么实现呢？\n\t可以将数据先存储起来，然后一次性加入。\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("let i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n    db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nums"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{num:i}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("方式二:")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这是将数据全部存到了数组中，随后再将数组插入，只执行了一次insert语句。\n*/")]),t._v("\nconst arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("let i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n    arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{num:i}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n}\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nums"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"_7-文档间的关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-文档间的关系"}},[t._v("#")]),t._v(" 7. 文档间的关系")]),t._v(" "),s("h3",{attrs:{id:"_7-1-一对一-one-to-one"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-一对一-one-to-one"}},[t._v("#")]),t._v(" 7.1 一对一(one to one)")]),t._v(" "),s("blockquote",[s("p",[t._v("内嵌文档\n例子：夫妻关系")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t可以看到一个妻子是对应一个丈夫的，这是使用内嵌文档来实现的。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wife"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    {\n        name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"黄蓉"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        handsband:{\n            name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"郭靖"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),t._v("\n        }\n    }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {\n        name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小兰"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        handsband:{\n            name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"新一"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\n        }\n    }\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"_7-2-一对多-one-to-many"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-一对多-one-to-many"}},[t._v("#")]),t._v(" 7.2 一对多(one to many)")]),t._v(" "),s("blockquote",[s("p",[t._v("例子：父母 - 孩子、文章 - 评论\n-- 内嵌文档也可以实现，就是一个文档内嵌多个文档，不过比较繁琐\n-- 用户一个文档，订单一个文档，在使用的时候再一一对应")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*第一句是创建了两个用户, 分别是花木兰和诸葛亮*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"花木兰"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"诸葛亮"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*这一句是查询用户内容， 这是需要知道用户的_id，从而在第三句加入*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*这是生成了一个订单，并且user_id存储的是花木兰的id*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{list_name:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"配马"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"鞍鞯"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user_id: ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"61374eac77393663e2de9bd3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*再生成了一个订单，并且user_id存储的是花木兰的id*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{list_name:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"蜜糖"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男装"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user_id: ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"61374eac77393663e2de9bd3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*在users里查找到 花木兰 这个用户的id，并将其存储起来*/")]),t._v("\nlet userId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("users"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"花木兰"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*使用id来查找*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{user_id: userId}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"_7-3-多对多-many-to-many"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-多对多-many-to-many"}},[t._v("#")]),t._v(" 7.3 多对多(many to many)")]),t._v(" "),s("blockquote",[s("p",[t._v("例子：学生 - 老师、商品 - 分类\n-- 可以使用内嵌文档的形式完成")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("teas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"诸葛亮"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"龟仙人"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"唐僧"')]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("teas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    {\n        name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"孙悟空"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*插入的是 龟仙人和唐僧的id*/")]),t._v("\n        teas_id:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6137552877393663e2de9bdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6137552877393663e2de9bdc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {\n        name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"刘禅"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*插入的是 诸葛亮和龟仙人的id*/")]),t._v("\n        teas_id:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6137552877393663e2de9bda"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ObjectId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6137552877393663e2de9bdb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    }\n        \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h2",{attrs:{id:"_8-投影"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-投影"}},[t._v("#")]),t._v(" 8. 投影")]),t._v(" "),s("p",[t._v("投影就是添加限制条件，显示按这些条件进行操作后的效果")]),t._v(" "),s("p",[t._v("首先先创建一个集合：")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这样创建的是一个列表集合。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小白"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"大白"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3500")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"熊大"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3200")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"熊二"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3100")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"光头强"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3400")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小鲤鱼"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    {name:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"奥特曼"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("39")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4500")]),t._v("}\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("需求一:按照薪资排列，可以使用sort()方法")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("sort(condition)")]),t._v("\nsort({salary:  1})表示按照薪资升序排列\nsort({salary: -1})表示按照薪资降序排列")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("排列结果:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/fa6dd5907b1140eaaff6b6675fe38d5d.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这句的含义是按照薪资升序排序，如果出现了相同的薪资的人，\n\t则按照年龄降序排序。\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age: "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("blockquote",[s("p",[t._v("limit() 限制 和skip() 跳过")]),t._v(" "),s("p",[t._v("这两个方法经常可以一起使用,从而用来翻页，而且这两个方法是可以不分先后的")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*表示只会显示前两个数据*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("执行结果:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/4c1a6c4b8b0547e6a99e8253abc2e016.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("blockquote",[s("p",[t._v("在查询时可以在find()中的第二个参数的位置传入"),s("strong",[t._v("投影")]),t._v("\n{name: 1, _id: 0}： 表示显示name属性，不显示_id属性")])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n\t这句的含义是只显示 name和salary属性，不显示 _id属性\n*/")]),t._v("\ndb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("staff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {name: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _id: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salary: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("执行结果:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://getpic.oss-cn-shenzhen.aliyuncs.com/b71fbad8e8e14af6b437724548a93ea0.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("h2",{attrs:{id:"_9-mongoose模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-mongoose模块"}},[t._v("#")]),t._v(" 9. mongoose模块")]),t._v(" "),s("p",[s("strong",[t._v("问1：什么是mongoose?")])]),t._v(" "),s("ol",[s("li",[t._v("一般我们不会直接用MongoDB的函数来操作MongoDB数据库 ，而mongose就是一套操作MongoDB数据库的接口")]),t._v(" "),s("li",[t._v("简而言之就是:mongoose也可以操作MongoDB，而且用它来操作数据库会有更多好处")]),t._v(" "),s("li",[t._v("mongoose是一个npm模块")])]),t._v(" "),s("p",[s("strong",[t._v("问2：为什么要使用mongoose? mongoose的优点有哪些？")])]),t._v(" "),s("ol",[s("li",[t._v("可以为mongodb的文档创建一个模式结构(Schema),说白了就是一个"),s("strong",[t._v("约束的条件")])]),t._v(" "),s("li",[t._v("比原生的Node相比更容易操作mongodb数据库，也就是"),s("strong",[t._v("更方便")])]),t._v(" "),s("li",[t._v("可以使用中间件和其他的应用业务挂钩，可以和其他的应用"),s("strong",[t._v("结合使用")])]),t._v(" "),s("li",[t._v("数据可以通过类型转换转换成对象模型，也就是可以使用"),s("strong",[t._v("方法")])])]),t._v(" "),s("h3",{attrs:{id:"_9-1-mongoose的常用对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-mongoose的常用对象"}},[t._v("#")]),t._v(" 9.1 mongoose的常用对象")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("对象")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Schema(模式对象)")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("定义了约束MongoDB的文档结构的条件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("相当于MongoDB中的 collection(集合)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Document")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Document表示集合中的具体文档")])])])]),t._v(" "),s("p",[t._v("注意：这三个都是对象，是对象的话则有它们对应的方法和属性")]),t._v(" "),s("h3",{attrs:{id:"_9-2-使用mongoose操作数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-使用mongoose操作数据库"}},[t._v("#")]),t._v(" 9.2 使用mongoose操作数据库")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当需要在webstorm或vscode时编写mongoose时,需要先将mongoose模块引入。步骤如下:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1、下载安装 在终端输入命令行: npm i mongoose --save")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2、引入mongose模块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3、 连接MongoDB数据库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//端口号是默认的 (27017), 则可以省略不写")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://数据库的ip地址:端口号/数据库名'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4、断开连接(一般不用)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一般只需要链接一次")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//监听MongoDB数据库的连接状态")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在momgoose对象中, 有一个属性叫 connnection 用来监视数据库的链接状态")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"close"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("而连接到MongoDB数据库前后则有以下操作步骤")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1、导入mongoose模块\t ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2、连接数据库并且监听\t ")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongodb://数据库ip地址:端口/数据库名称"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3、创建Schema约束条件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t将Schema重命名\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" schema约束条件 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("约束的内容"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4、创建Model")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" 模型Model "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb的集合名'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" schema约束条件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//5、插入文档")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用 模型Model,插入文档")]),t._v("\n模型model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("文档document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[s("strong",[t._v("示例代码")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1、引入 mongoose 模块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mongoose "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongoose'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2、连接数据库    27017是默认端口号，可以省略不写， ppxia是需要连接的数据库")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://127.0.0.1:27017/ppxia'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1、这是对数据库的监听，而且是使用once, 只监听一次就行了")]),t._v("\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'open'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数据库已连接..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数据库已断开!!!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3、重命名，简化操作")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.1、创建了约束条件:type是类型，default是默认是女，如果是女的话则不用写性别这个属性值了。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stuSch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"女"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4、创建了 模型， 数据库中的集合名是 stuSch(会自动加s), 第二个参数是标准，即是约束条件: stuSch")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stuModel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stuSch'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stuSch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5、使用模型创建对象, 当想创建多个的时候，可以使用数组里面存储对象的方式")]),t._v("\nstuModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"西施"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"王者峡谷"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'文档创建成功~'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br")])]),s("h3",{attrs:{id:"_9-3-model的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-model的方法"}},[t._v("#")]),t._v(" 9.3 Model的方法")]),t._v(" "),s("h4",{attrs:{id:"_1-增加"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-增加"}},[t._v("#")]),t._v(" 1. 增加")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.create(doc,[callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("创建一个或多个对象")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.createOne(doc, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("创建一个对象")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.createMany(doc, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("创建多个对象")])])])]),t._v(" "),s("ol",[s("li",[t._v("参数doc是需要插入的文档")]),t._v(" "),s("li",[t._v("参数callback(err) 是回调函数，可以用来提示是否创建成功了")])]),t._v(" "),s("h4",{attrs:{id:"_2-查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询"}},[t._v("#")]),t._v(" 2. 查询")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.find(condition, 投影, [options], [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询一个或多个文档"),s("br"),t._v("返回的是文档数组")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.findById(id, 投影, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("根据id查询一个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.findMany(condition, 投影. [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询符合条件的多个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.findOne(condition, [projection], [options], [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询符合条件的第一个匹配文档")])])])]),t._v(" "),s("p",[t._v("涉及到的参数如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("condition")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询条件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("投影/ projection")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("投影，也就是 查询条件，有两种方式"),s("br"),t._v("\t\t\t{name: 1, _id:0}: 1是显示，0是不显示"),s("br"),t._v('"name  -_id"显示name, 不显示 _id')])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("options")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询的选项, skip是跳过，limit是限制 {skip: 3, limit:3}")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.findOne(condition, [projection], [options], [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查询一个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("callback")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("回调函数,有两个参数(err, doc) err是错误类型, doc是文档")])])])]),t._v(" "),s("h4",{attrs:{id:"_3-修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改"}},[t._v("#")]),t._v(" 3. 修改")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.updateMany(condition, doc, [options], [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("修改符合条件的多个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.updateOne(condition, doc, [options], callback);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("修改符合条件的第一个匹配文档")])])])]),t._v(" "),s("ol",[s("li",[t._v("参数"),s("strong",[t._v("condition")]),t._v("是修改的条件")]),t._v(" "),s("li",[t._v("参数"),s("strong",[t._v("doc")]),t._v("是修改后的内容/需要修改的内容")])]),t._v(" "),s("p",[t._v("需要配合修改操作符来使用:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("修改操作符")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用处")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$set")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示需要设置指定的属性")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$unset")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示需要删除指定的属性")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$push")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示给数组添加一个新元素，因为文档内也会有数组，数组便会有数组元素")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$addToset")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示给数组添加一个新元素，和push的区别是，如果出现同名的数组元素，则不会再添加")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$gt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("大于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$gte")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("大于等于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$lt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("小于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$lte")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("小于等于")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$or [{条件一,条件二}]")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示或的意思，符合条件一或者条件二")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("$inc")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("表示自增，在原来数据的基础上对数据加减")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-删除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除"}},[t._v("#")]),t._v(" 4. 删除")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.remove(condition, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("删除符合条件的一或多个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.deleteOne(condition, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("删除符合条件的第一个文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.deleteMany(condition, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("删除符合条件的多个文档")])])])]),t._v(" "),s("ol",[s("li",[t._v("参数"),s("strong",[t._v("condition")]),t._v("是修改的条件")]),t._v(" "),s("li",[t._v("参数"),s("strong",[t._v("callback")]),t._v("是删除成功后要执行的回调函数")])]),t._v(" "),s("h4",{attrs:{id:"_5-计数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-计数"}},[t._v("#")]),t._v(" 5. 计数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Model.count(condition, [callback]);")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("获取当前这个集合的符合条件的文档数量")])])])]),t._v(" "),s("h3",{attrs:{id:"_9-4-document的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-document的方法"}},[t._v("#")]),t._v(" 9.4 Document的方法")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("方法或属性")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("用途")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("document.save([options], [callback])")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("document.update([options], [callback])")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("collection.update不推荐使用"),s("br"),t._v("建议改用updateOne、updateMany或bulkWrite")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("doc.get(属性)")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("获取指定属性值")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v('doc.get("name") === doc.name')])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v('doc.set("属性名","属性值")')]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设置指定属性的值")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v('doc.set("name", "猪猪") === doc.name = "猪猪"')])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("doc.id")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("属性, 获取id")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("doc.toJSON()")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("将文档对象转换成JSON")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("doc.toObject()")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("将文档对象转为普通js对象")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("转换后所有文档对象的属性和方法都不能用了"),s("br"),t._v("我们可以先将获取到的文档对象toObject()"),s("br"),t._v("再使用删除方法去掉某些敏感数据再输出"),s("br"),t._v("同时数据库里的敏感信息也没有被真正删除")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);