<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript高级篇 | uploadhub的技术博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.png">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.176e62ce.css" as="style"><link rel="preload" href="/assets/js/app.1f1ab57c.js" as="script"><link rel="preload" href="/assets/js/2.091c8f37.js" as="script"><link rel="preload" href="/assets/js/8.301a5091.js" as="script"><link rel="prefetch" href="/assets/js/10.35c9e42d.js"><link rel="prefetch" href="/assets/js/11.3b58f631.js"><link rel="prefetch" href="/assets/js/12.366718db.js"><link rel="prefetch" href="/assets/js/13.65dbf792.js"><link rel="prefetch" href="/assets/js/14.657af822.js"><link rel="prefetch" href="/assets/js/15.da71e392.js"><link rel="prefetch" href="/assets/js/16.144334e1.js"><link rel="prefetch" href="/assets/js/17.0e37f9ea.js"><link rel="prefetch" href="/assets/js/18.ff8e9b5a.js"><link rel="prefetch" href="/assets/js/19.cab971fa.js"><link rel="prefetch" href="/assets/js/20.45cfdf2c.js"><link rel="prefetch" href="/assets/js/21.39c4cf04.js"><link rel="prefetch" href="/assets/js/22.17e124f1.js"><link rel="prefetch" href="/assets/js/23.3ba7fd18.js"><link rel="prefetch" href="/assets/js/24.bf1a22bf.js"><link rel="prefetch" href="/assets/js/25.601ad2dd.js"><link rel="prefetch" href="/assets/js/26.7723d969.js"><link rel="prefetch" href="/assets/js/27.5d68f75e.js"><link rel="prefetch" href="/assets/js/28.558d89d0.js"><link rel="prefetch" href="/assets/js/29.d916adb5.js"><link rel="prefetch" href="/assets/js/3.0324b125.js"><link rel="prefetch" href="/assets/js/30.fbec591c.js"><link rel="prefetch" href="/assets/js/31.f2a0df64.js"><link rel="prefetch" href="/assets/js/32.0a862cdb.js"><link rel="prefetch" href="/assets/js/33.7e64a907.js"><link rel="prefetch" href="/assets/js/34.290a1e37.js"><link rel="prefetch" href="/assets/js/35.28dbf541.js"><link rel="prefetch" href="/assets/js/36.d41e3d4d.js"><link rel="prefetch" href="/assets/js/37.33ae84a9.js"><link rel="prefetch" href="/assets/js/38.b6152a62.js"><link rel="prefetch" href="/assets/js/39.ae208d3a.js"><link rel="prefetch" href="/assets/js/4.8b2eab81.js"><link rel="prefetch" href="/assets/js/40.299bf023.js"><link rel="prefetch" href="/assets/js/41.cfcf2b5a.js"><link rel="prefetch" href="/assets/js/42.28b66853.js"><link rel="prefetch" href="/assets/js/43.6b998c5a.js"><link rel="prefetch" href="/assets/js/44.824d0db9.js"><link rel="prefetch" href="/assets/js/45.c261bc1e.js"><link rel="prefetch" href="/assets/js/46.a1aad033.js"><link rel="prefetch" href="/assets/js/47.c63885dc.js"><link rel="prefetch" href="/assets/js/48.13bb55ab.js"><link rel="prefetch" href="/assets/js/49.17163636.js"><link rel="prefetch" href="/assets/js/5.5682cd95.js"><link rel="prefetch" href="/assets/js/50.26bd7726.js"><link rel="prefetch" href="/assets/js/51.4e9b01ae.js"><link rel="prefetch" href="/assets/js/52.4ee9755c.js"><link rel="prefetch" href="/assets/js/53.91c7a96d.js"><link rel="prefetch" href="/assets/js/54.3bfb94da.js"><link rel="prefetch" href="/assets/js/55.806469e8.js"><link rel="prefetch" href="/assets/js/56.c4d64e33.js"><link rel="prefetch" href="/assets/js/57.f989cf86.js"><link rel="prefetch" href="/assets/js/58.8952330f.js"><link rel="prefetch" href="/assets/js/59.2fda97e5.js"><link rel="prefetch" href="/assets/js/6.c8d84b68.js"><link rel="prefetch" href="/assets/js/60.ad11295c.js"><link rel="prefetch" href="/assets/js/61.c0c67db7.js"><link rel="prefetch" href="/assets/js/7.92d3b2f9.js"><link rel="prefetch" href="/assets/js/9.ccc1366d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.176e62ce.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="uploadhub的技术博客" class="logo"> <span class="site-name can-hide">uploadhub的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2a8510/" class="nav-link">《HTML5和CSS3篇》</a></li><li class="dropdown-subitem"><a href="/pages/66da93/" class="nav-link">《JavaScript基础篇》</a></li><li class="dropdown-subitem"><a href="/pages/d5f3f8/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《JavaScript高级篇》</a></li><li class="dropdown-subitem"><a href="/pages/d36ce7/" class="nav-link">《Ajax篇》</a></li><li class="dropdown-subitem"><a href="/pages/8f43f3/" class="nav-link">《JavaScript模块化篇》</a></li><li class="dropdown-subitem"><a href="/pages/158cc8/" class="nav-link">《Node.js篇》</a></li><li class="dropdown-subitem"><a href="/pages/54baea/" class="nav-link">《MongoDB篇》</a></li><li class="dropdown-subitem"><a href="/pages/93651e/" class="nav-link">《Promise篇》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git篇》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/pages/a1940a/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a1940a/" class="nav-link">《Vue2+Vue3篇》</a></li><li class="dropdown-item"><!----> <a href="/pages/f6h57b/" class="nav-link">《React篇》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/pages/8309a5b876fc95e3/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">一面-基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">二三面-进阶</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/avatar.png"> <div class="blogger-info"><h3>uploadhub</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2a8510/" class="nav-link">《HTML5和CSS3篇》</a></li><li class="dropdown-subitem"><a href="/pages/66da93/" class="nav-link">《JavaScript基础篇》</a></li><li class="dropdown-subitem"><a href="/pages/d5f3f8/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《JavaScript高级篇》</a></li><li class="dropdown-subitem"><a href="/pages/d36ce7/" class="nav-link">《Ajax篇》</a></li><li class="dropdown-subitem"><a href="/pages/8f43f3/" class="nav-link">《JavaScript模块化篇》</a></li><li class="dropdown-subitem"><a href="/pages/158cc8/" class="nav-link">《Node.js篇》</a></li><li class="dropdown-subitem"><a href="/pages/54baea/" class="nav-link">《MongoDB篇》</a></li><li class="dropdown-subitem"><a href="/pages/93651e/" class="nav-link">《Promise篇》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git篇》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/pages/a1940a/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a1940a/" class="nav-link">《Vue2+Vue3篇》</a></li><li class="dropdown-item"><!----> <a href="/pages/f6h57b/" class="nav-link">《React篇》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/pages/8309a5b876fc95e3/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">一面-基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">二三面-进阶</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2a8510/" class="sidebar-link">HTML5和CSS3篇</a></li><li><a href="/pages/66da93/" class="sidebar-link">JavaScript基础篇</a></li><li><a href="/pages/d5f3f8/" aria-current="page" class="active sidebar-link">JavaScript高级篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_1-数据类型" class="sidebar-link">1. 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_1-1-分类" class="sidebar-link">1.1 分类</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_1-2-类型的判断" class="sidebar-link">1.2 类型的判断</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_1-3-相关问题" class="sidebar-link">1.3 相关问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_2-数据-变量-内存" class="sidebar-link">2. 数据-变量-内存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-1-什么是数据" class="sidebar-link">2.1 什么是数据?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-2-什么是内存" class="sidebar-link">2.2 什么是内存?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-3-什么是变量" class="sidebar-link">2.3 什么是变量?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-4-内存-数据-变量三者之间的关系" class="sidebar-link">2.4 内存,数据, 变量三者之间的关系</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-5-赋值与内存的问题" class="sidebar-link">2.5 赋值与内存的问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-6-关于引用变量赋值问题" class="sidebar-link">2.6 关于引用变量赋值问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-7-关于数据传递问题" class="sidebar-link">2.7 关于数据传递问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_2-8-js引擎如何管理内存" class="sidebar-link">2.8 JS引擎如何管理内存?</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_3-对象" class="sidebar-link">3. 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_3-1-什么是对象" class="sidebar-link">3.1 什么是对象?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_3-2-为什么要用对象" class="sidebar-link">3.2 为什么要用对象?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_3-3-对象的组成" class="sidebar-link">3.3 对象的组成</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_3-4-如何访问对象内部数据" class="sidebar-link">3.4 如何访问对象内部数据?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_3-5-相关问题" class="sidebar-link">3.5 相关问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_4-函数" class="sidebar-link">4. 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_4-1什么是函数" class="sidebar-link">4.1什么是函数?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_4-2-为什么要用函数" class="sidebar-link">4.2 为什么要用函数?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_4-3-如何定义函数" class="sidebar-link">4.3 如何定义函数?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_4-4-如何调用-执行-函数" class="sidebar-link">4.4 如何调用(执行)函数?</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_5-回调函数" class="sidebar-link">5. 回调函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_5-1-什么函数才是回调函数" class="sidebar-link">5.1 什么函数才是回调函数?</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_5-2-常见回调函数及其从属的对象" class="sidebar-link">5.2 常见回调函数及其从属的对象?</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_6-iife-立即调用函数表达式" class="sidebar-link">6. IIFE（立即调用函数表达式）</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_7-this" class="sidebar-link">7. this</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_8-原型-prototype" class="sidebar-link">8. 原型(prototype)</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_9-显式原型与隐式原型" class="sidebar-link">9. 显式原型与隐式原型</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_10-原型链" class="sidebar-link">10. 原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_10-1-构造函数-原型-实例对象的关系" class="sidebar-link">10.1 构造函数/原型/实例对象的关系</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_10-2-属性问题" class="sidebar-link">10.2 属性问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_10-3-探索instanceof" class="sidebar-link">10.3 探索instanceof</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_10-4-属性问题" class="sidebar-link">10.4 属性问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_10-5-相关面试题" class="sidebar-link">10.5 相关面试题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_11-执行上下文与执行上下文栈" class="sidebar-link">11. 执行上下文与执行上下文栈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_11-1-变量提升与函数提升" class="sidebar-link">11.1 变量提升与函数提升</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_11-2-执行上下文" class="sidebar-link">11.2 执行上下文</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_11-3-执行上下文栈-call-stack" class="sidebar-link">11.3 执行上下文栈(call stack)</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_11-4-相关面试题" class="sidebar-link">11.4 相关面试题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_12-作用域与作用域链" class="sidebar-link">12. 作用域与作用域链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_12-1-作用域" class="sidebar-link">12.1 作用域</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_12-2-作用域与执行上下文" class="sidebar-link">12.2 作用域与执行上下文</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_12-3-作用域链" class="sidebar-link">12.3 作用域链</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_13-闭包" class="sidebar-link">13. 闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-1-理解闭包" class="sidebar-link">13.1 理解闭包</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-2-常见闭包" class="sidebar-link">13.2 常见闭包</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-3-闭包的作用" class="sidebar-link">13.3 闭包的作用</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-4-闭包的生命周期" class="sidebar-link">13.4 闭包的生命周期</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-5-闭包的作用-定义js模块" class="sidebar-link">13.5 闭包的作用（定义JS模块）</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-6-闭包的缺点及解决" class="sidebar-link">13.6 闭包的缺点及解决</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_13-7-相关面试题" class="sidebar-link">13.7 相关面试题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_14-对象创建模式" class="sidebar-link">14. 对象创建模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_14-1-object构造函数模式" class="sidebar-link">14.1 Object构造函数模式</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_14-2-对象字面量模式" class="sidebar-link">14.2 对象字面量模式</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_14-3-工厂模式" class="sidebar-link">14.3 工厂模式</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_14-4-自定义构造函数" class="sidebar-link">14.4 自定义构造函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_14-5-自定义构造函数-原型对象组合使用" class="sidebar-link">14.5 自定义构造函数+原型对象组合使用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_15-继承模式" class="sidebar-link">15. 继承模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_15-1-原型链继承" class="sidebar-link">15.1 原型链继承</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_15-2-借用构造函数继承" class="sidebar-link">15.2 借用构造函数继承</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_15-3-寄生式继承" class="sidebar-link">15.3 寄生式继承</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_15-4-组合继承" class="sidebar-link">15.4 组合继承</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_16-进程与线程" class="sidebar-link">16. 进程与线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_16-1-比较单线程与多线程" class="sidebar-link">16.1 比较单线程与多线程</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_16-2-浏览器与进程-线程" class="sidebar-link">16.2 浏览器与进程/线程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_17-浏览器内核" class="sidebar-link">17. 浏览器内核</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_18-启动定时器" class="sidebar-link">18. 启动定时器</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_19-js是单线程执行的" class="sidebar-link">19. JS是单线程执行的</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_19-1-代码分类" class="sidebar-link">19.1 代码分类</a></li><li class="sidebar-sub-header level3"><a href="/pages/d5f3f8/#_19-2-js引擎执行代码的基本流程" class="sidebar-link">19.2 js引擎执行代码的基本流程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_20-事件循环模型" class="sidebar-link">20. 事件循环模型</a></li><li class="sidebar-sub-header level2"><a href="/pages/d5f3f8/#_21-h5-web-workers多线程" class="sidebar-link">21. H5 Web Workers多线程</a></li></ul></li><li><a href="/pages/d36ce7/" class="sidebar-link">Ajax篇</a></li><li><a href="/pages/8f43f3/" class="sidebar-link">JavaScript模块化篇</a></li><li><a href="/pages/158cc8/" class="sidebar-link">Node.js篇</a></li><li><a href="/pages/54baea/" class="sidebar-link">MongoDB篇</a></li><li><a href="/pages/93651e/" class="sidebar-link">Promise篇</a></li><li><a href="/note/git/" class="sidebar-link">Git篇</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/web/#前端" data-v-06225672>前端</a></li><li data-v-06225672><a href="/web/#学习笔记" data-v-06225672>学习笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/uploadhub" target="_blank" title="作者" class="beLink" data-v-06225672>uploadhub</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-03-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JavaScript高级篇<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="基础总结深入"><a href="#基础总结深入" class="header-anchor">#</a> 基础总结深入</h1> <h2 id="_1-数据类型"><a href="#_1-数据类型" class="header-anchor">#</a> 1. 数据类型</h2> <h3 id="_1-1-分类"><a href="#_1-1-分类" class="header-anchor">#</a> <strong>1.1 分类</strong></h3> <p>1.基本（值）类型</p> <table><thead><tr><th style="text-align:center;">类型</th> <th style="text-align:center;">可能的值</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>String</strong></td> <td style="text-align:center;">任意字符串</td></tr> <tr><td style="text-align:center;"><strong>Number</strong></td> <td style="text-align:center;">任意的数字</td></tr> <tr><td style="text-align:center;"><strong>boolean</strong></td> <td style="text-align:center;">true/false</td></tr> <tr><td style="text-align:center;"><strong>undefined</strong></td> <td style="text-align:center;">undefined</td></tr> <tr><td style="text-align:center;"><strong>null</strong></td> <td style="text-align:center;">null</td></tr></tbody></table> <p>2.对象（引用）类型</p> <table><thead><tr><th style="text-align:center;">类型</th> <th style="text-align:center;">特征</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>Object</strong></td> <td style="text-align:center;">任意对象</td></tr> <tr><td style="text-align:center;"><strong>Function</strong></td> <td style="text-align:center;">一种特别的对象（可以执行）</td></tr> <tr><td style="text-align:center;"><strong>Array</strong></td> <td style="text-align:center;">一种特别的对象(数值下标, 内部数据是有序的)</td></tr></tbody></table> <h3 id="_1-2-类型的判断"><a href="#_1-2-类型的判断" class="header-anchor">#</a> 1.2 类型的判断</h3> <table><thead><tr><th style="text-align:center;">关键字</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>typeof</strong></td> <td style="text-align:center;">返回数据类型的字符串表达</td></tr> <tr><td style="text-align:center;"><strong>instanceof</strong></td> <td style="text-align:center;">判断对象的具体类型，即判断某个实例是否为特定的类型，并将判断结果的布尔值返回</td></tr> <tr><td style="text-align:center;"><strong>===</strong></td> <td style="text-align:center;">严格的比较判断，不做类型转换，类型不同的一定不等</td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">关键字</th> <th style="text-align:center;">可以判断</th> <th style="text-align:center;">不能区分</th></tr></thead> <tbody><tr><td style="text-align:center;"><strong>typeof</strong></td> <td style="text-align:center;">undefined/ 数值 / 字符串 / 布尔值 / function</td> <td style="text-align:center;">null与object 、object与array</td></tr> <tr><td style="text-align:center;"><strong>instanceof</strong></td> <td style="text-align:center;">实例</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;"><strong>===</strong></td> <td style="text-align:center;">undefined, null</td> <td style="text-align:center;"></td></tr></tbody></table> <p><strong>例子</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">//1. 基本</span>
  <span class="token comment">// typeof返回数据类型的字符串表达</span>
  <span class="token keyword">var</span> a
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">typeof</span> a<span class="token punctuation">,</span> <span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">'undefined'</span><span class="token punctuation">,</span>a<span class="token operator">===</span><span class="token keyword">undefined</span> <span class="token punctuation">)</span>  <span class="token comment">// undefined 'undefined' true true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token operator">===</span><span class="token string">'undefined'</span><span class="token punctuation">)</span>
  a <span class="token operator">=</span> <span class="token number">4</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">'number'</span><span class="token punctuation">)</span>
  a <span class="token operator">=</span> <span class="token string">'atguigu'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">'string'</span><span class="token punctuation">)</span>
  a <span class="token operator">=</span> <span class="token boolean">true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token operator">===</span><span class="token string">'boolean'</span><span class="token punctuation">)</span>
  a <span class="token operator">=</span> <span class="token keyword">null</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">,</span> a<span class="token operator">===</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 'object'</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----------------'</span><span class="token punctuation">)</span>
  <span class="token comment">//2. 对象</span>
  <span class="token keyword">var</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b2</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">,</span> console<span class="token punctuation">.</span>log<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">b3</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b3'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'xfzhang'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> b1 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// true  false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">,</span> b1<span class="token punctuation">.</span>b2 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">,</span> b1<span class="token punctuation">.</span>b3 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">// true true</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b2<span class="token punctuation">,</span> <span class="token string">'-------'</span><span class="token punctuation">)</span> <span class="token comment">// 'object'</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b3<span class="token operator">===</span><span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b1<span class="token punctuation">.</span>b2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string">'function'</span><span class="token punctuation">)</span>
  b1<span class="token punctuation">.</span>b2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">.</span><span class="token function">b3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_1-3-相关问题"><a href="#_1-3-相关问题" class="header-anchor">#</a> 1.3 相关问题</h3> <p><strong>1.undefined与null的区别?</strong></p> <ol><li>undefined代表定义未赋值</li> <li>null定义并赋值了, 只是值为null</li></ol> <p><strong>2.什么时候给变量赋值为null呢?</strong></p> <ol><li>初始赋值, 表明将要赋值为对象</li> <li>结束前, 让对象成为垃圾对象(被垃圾回收器回收)</li></ol> <p><strong>3.严格区别变量类型与数据类型?</strong></p> <p><strong>数据的类型</strong>：①基本类型②对象类型</p> <p><strong>变量的类型(变量内存值的类型)</strong></p> <ul><li>基本类型: 保存就是基本类型的数据</li> <li>引用类型: 保存的是地址值</li></ul> <h2 id="_2-数据-变量-内存"><a href="#_2-数据-变量-内存" class="header-anchor">#</a> 2. 数据-变量-内存</h2> <h3 id="_2-1-什么是数据"><a href="#_2-1-什么是数据" class="header-anchor">#</a> <strong>2.1 什么是数据?</strong></h3> <ol><li><strong>存储在内存中</strong>代表特定信息的事务, 本质上是0101...</li> <li>数据的特点: 可传递, 可运算</li> <li>一切皆数据</li> <li>内存中所有操作的目标: 数据</li></ol> <p><strong>JS中运算的分类</strong></p> <ol><li>算术运算</li> <li>逻辑运算</li> <li>赋值</li> <li>运行函数</li></ol> <h3 id="_2-2-什么是内存"><a href="#_2-2-什么是内存" class="header-anchor">#</a> <strong>2.2 什么是内存?</strong></h3> <p>答：内存条通电后产生的可储存数据的空间(临时的)</p> <p><strong>内存产生和死亡过程</strong></p> <blockquote><p>内存条(电路版)== &gt;通电== &gt;产生内存空间== &gt;存储数据== &gt;处理数据== &gt;断电==&gt;内存空间和数据都消失</p></blockquote> <p>应用程序中分配给变量一小块内存，它们都在<strong>栈内存</strong>中，分为：</p> <ol><li>内部存储的数据</li> <li>地址值</li></ol> <p><strong>内存分类</strong></p> <ol><li>栈: 全局变量/局部变量</li> <li>堆: 对象</li></ol> <h3 id="_2-3-什么是变量"><a href="#_2-3-什么是变量" class="header-anchor">#</a> 2.3 什么是变量?</h3> <div class="language- extra-class"><pre><code>1. 可变化的量, 由变量名和变量值组成
2. 每个变量都对应的一块小内存, 变量名用来查找对应的内存, 变量值就是内存中保存的数据
</code></pre></div><h3 id="_2-4-内存-数据-变量三者之间的关系"><a href="#_2-4-内存-数据-变量三者之间的关系" class="header-anchor">#</a> 2.4 内存,数据, 变量三者之间的关系</h3> <div class="language- extra-class"><pre><code>1. 内存是用来存储数据的空间
2. 变量是内存的标识
</code></pre></div><h3 id="_2-5-赋值与内存的问题"><a href="#_2-5-赋值与内存的问题" class="header-anchor">#</a> 2.5 赋值与内存的问题</h3> <p><strong>var a = xxx, a内存中到底保存的是什么?</strong></p> <ol><li>xxx是基本（类型）数据, 保存的就是这个数据</li> <li>xxx是对象, 保存的是对象的地址值</li> <li>xxx是一个变量, 保存的xxx的内存内容(可能是基本数据, 也可能是地址值)</li></ol> <h3 id="_2-6-关于引用变量赋值问题"><a href="#_2-6-关于引用变量赋值问题" class="header-anchor">#</a> 2.6 关于引用变量赋值问题</h3> <ol><li>多个引用变量指向同一个对象, 通过一个变量修改对象内部数据, 另外的变量看到的是修改之后的数据</li> <li>多个引用变量指向同一个对象, 让其中一个引用变量指向另一个对象, 另外的引用变量依然指向前一个对象</li></ol> <h3 id="_2-7-关于数据传递问题"><a href="#_2-7-关于数据传递问题" class="header-anchor">#</a> 2.7 关于数据传递问题</h3> <p>在js调用函数时传递变量参数时, 是值传递还是引用传递?</p> <ol><li>理解1: 都是值(基本/地址值)传递</li> <li>理解2: 可能是值传递, 也可能是引用传递(地址值)</li></ol> <h3 id="_2-8-js引擎如何管理内存"><a href="#_2-8-js引擎如何管理内存" class="header-anchor">#</a> 2.8 JS引擎如何管理内存?</h3> <p><strong>内存生命周期</strong></p> <div class="language- extra-class"><pre><code>1. 分配给变量小块内存空间, 并得到它的使用权
2. 存储数据, 可以反复进行操作
3. 使用完后释放相应的内存空间
</code></pre></div><p><strong>释放内存</strong></p> <div class="language- extra-class"><pre><code>1. 局部变量: 函数执行完自动释放
2. 对象: 成为垃圾对象==&gt;垃圾回收器回收
</code></pre></div><h2 id="_3-对象"><a href="#_3-对象" class="header-anchor">#</a> 3. 对象</h2> <h3 id="_3-1-什么是对象"><a href="#_3-1-什么是对象" class="header-anchor">#</a> 3.1 什么是对象?</h3> <div class="language- extra-class"><pre><code>1. 多个数据的封装体
2. 用来保存多个数据的容器
3. 一个对象代表现实中的一个事物
</code></pre></div><h3 id="_3-2-为什么要用对象"><a href="#_3-2-为什么要用对象" class="header-anchor">#</a> 3.2 为什么要用对象?</h3> <ul><li>统一管理多个数据</li></ul> <h3 id="_3-3-对象的组成"><a href="#_3-3-对象的组成" class="header-anchor">#</a> 3.3 对象的组成</h3> <div class="language- extra-class"><pre><code>1. 属性: 属性名(字符串)和属性值(任意)组成
2. 方法: 一种特别的属性(属性值是函数)
</code></pre></div><h3 id="_3-4-如何访问对象内部数据"><a href="#_3-4-如何访问对象内部数据" class="header-anchor">#</a> 3.4 如何访问对象内部数据?</h3> <div class="language- extra-class"><pre><code>1. .属性名: 编码简单, 有时不能用
2. ['属性名']: 编码麻烦, 能通用
</code></pre></div><h3 id="_3-5-相关问题"><a href="#_3-5-相关问题" class="header-anchor">#</a> 3.5 相关问题</h3> <p><strong>问题: 什么时候必须使用['属性名']的方式?</strong></p> <ol><li>属性名包含特殊字符，如: - 空格</li> <li>属性名不确定</li></ol> <p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">//1. 给p对象添加一个属性: content type: text/json</span>
  <span class="token comment">// p.content-type = 'text/json' //不能用</span>
  p<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'text/json'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">//2. 属性名不确定</span>
  <span class="token keyword">var</span> propName <span class="token operator">=</span> <span class="token string">'myAge'</span>
  <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">18</span>
  <span class="token comment">// p.propName = value //不能用</span>
  p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span> <span class="token operator">=</span> value
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_4-函数"><a href="#_4-函数" class="header-anchor">#</a> 4. 函数</h2> <h3 id="_4-1什么是函数"><a href="#_4-1什么是函数" class="header-anchor">#</a> 4.1什么是函数?</h3> <ol><li>实现特定功能的n条语句的封装体</li> <li>只有函数是可以执行的, 其它类型的数据不能执行</li></ol> <h3 id="_4-2-为什么要用函数"><a href="#_4-2-为什么要用函数" class="header-anchor">#</a> 4.2 为什么要用函数?</h3> <div class="language- extra-class"><pre><code>1. 提高代码复用
2. 便于阅读交流
</code></pre></div><h3 id="_4-3-如何定义函数"><a href="#_4-3-如何定义函数" class="header-anchor">#</a> 4.3 如何定义函数?</h3> <div class="language- extra-class"><pre><code>1. 函数声明
2. 表达式
</code></pre></div><p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//函数声明  </span>
<span class="token keyword">function</span> <span class="token function">fn1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn1()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//表达式</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2()'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_4-4-如何调用-执行-函数"><a href="#_4-4-如何调用-执行-函数" class="header-anchor">#</a> 4.4 如何调用(执行)函数?</h3> <div class="language- extra-class"><pre><code>1. **test()**: 直接调用
2. **obj.test()**: 通过对象调用
3. **new test()**: new调用
4. **test.call/apply(obj)**: 临时让test成为obj的方法进行调用
</code></pre></div><p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">test2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>xxx <span class="token operator">=</span> <span class="token string">'atguigu'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// obj.test2()  不能直接调用, obj对象根本就没有test2方法</span>
  <span class="token function">test2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 相当于obj.test2() ，可以让一个函数成为指定任意对象的方法进行调用</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>xxx<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_5-回调函数"><a href="#_5-回调函数" class="header-anchor">#</a> 5. 回调函数</h2> <h3 id="_5-1-什么函数才是回调函数"><a href="#_5-1-什么函数才是回调函数" class="header-anchor">#</a> 5.1 什么函数才是回调函数?</h3> <ol><li>你定义的</li> <li>你没有调</li> <li>但最终它执行了(在某个时刻或某个条件下)</li></ol> <h3 id="_5-2-常见回调函数及其从属的对象"><a href="#_5-2-常见回调函数及其从属的对象" class="header-anchor">#</a> 5.2 常见回调函数及其从属的对象?</h3> <div class="language- extra-class"><pre><code>1. dom事件回调函数 ==&gt;发生事件的dom元素
2. 定时器回调函数 ===&gt;window

3. Ajax请求回调函数(后面讲)
4. 生命周期回调函数(后面讲)
</code></pre></div><h2 id="_6-iife-立即调用函数表达式"><a href="#_6-iife-立即调用函数表达式" class="header-anchor">#</a> 6. IIFE（立即调用函数表达式）</h2> <p><strong>IIFE</strong>全称 Immediately-Invoked Function Expression，别名: 匿名函数自调用（但不是十分准确的翻译）。是一种利用JavaScript函数<strong>生成新作用域</strong>的编程方法。</p> <ol><li>IIFE可以令其函数中声明的变量绕过JavaScript的变量置顶声明规则</li> <li>还可以避免新的变量被解释成全局变量或函数名占用全局变量名的情况</li> <li>与此同时它能在禁止访问函数内声明变量的情况下允许外部对函数的调用</li></ol> <p><strong>作用</strong></p> <div class="language- extra-class"><pre><code>1. 隐藏函数的具体实现
2. 不会污染外部(全局)命名空间
3. 用它来编码js模块
</code></pre></div><p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">//匿名函数自调用</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

	<span class="token comment">//立即执行函数代码前不加&quot;;&quot;  浏览器会报错</span>
    <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        window<span class="token punctuation">.</span><span class="token function-variable function">$</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 向外暴露一个全局函数</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> test
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1. $是一个函数 2. $执行后返回的是一个对象</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_7-this"><a href="#_7-this" class="header-anchor">#</a> 7. this</h2> <p>解析器在调用函数每次都会向函数内部传递进一个隐含的参数,这个隐含的参数就是this，this指向的是调用函数的当前对象，这个对象我们称为<strong>函数执行的上下文对象</strong>。</p> <p>根据函数的调用方式的不同，this会指向不同的对象</p> <ol><li><strong>以函数的形式调用时，this永远都是指向全局对象window</strong></li> <li><strong>以方法的形式调用时，this就是指向调用方法的那个对象</strong></li> <li><strong>以构造函数调用时，this就是指向新创建的对象</strong></li> <li><strong>以call或apply方法调用时，this指向的是我们指定传入方法中的那个实参</strong></li></ol> <p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setColor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? window</span>

  <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;yello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? p</span>

  p<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? p</span>

  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  p<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? obj</span>

  <span class="token keyword">var</span> test <span class="token operator">=</span> p<span class="token punctuation">.</span>setColor<span class="token punctuation">;</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? window</span>

  <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是谁? window</span>
  <span class="token punctuation">}</span>
  <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h1 id="函数高级"><a href="#函数高级" class="header-anchor">#</a> 函数高级</h1> <h2 id="_8-原型-prototype"><a href="#_8-原型-prototype" class="header-anchor">#</a> 8. 原型(prototype)</h2> <p><strong>1.函数的prototype属性</strong></p> <ul><li>每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</li> <li>原型对象中有一个属性constructor, 它指向函数对象</li></ul> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/JS%E9%AB%98%E7%BA%A7.png" alt="JS高级"></p> <p><strong>2.给原型对象添加属性(一般都是方法)</strong></p> <ul><li>作用: 函数的所有实例对象自动拥有原型中的属性(方法)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

  <span class="token comment">// 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token keyword">typeof</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">Fun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment">// 默认指向一个Object空对象(没有我们的属性)</span>

  <span class="token comment">// 原型对象中有一个属性constructor, 它指向函数对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Date<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Fun<span class="token punctuation">)</span>

  <span class="token comment">//给原型对象添加属性(一般是方法) ===&gt;实例对象可以访问</span>
  <span class="token class-name">Fun</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test()'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fun<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_9-显式原型与隐式原型"><a href="#_9-显式原型与隐式原型" class="header-anchor">#</a> 9. 显式原型与隐式原型</h2> <ol><li>每个函数function都有一个prototype，即显式原型(属性)</li> <li>每个实例对象都有一个_<em>proto</em>_，可称为隐式原型(属性)</li> <li>对象的隐式原型的值为其对应构造函数的显式原型的值，即<strong>实例的隐式原型属性永远指向自身构造函数的显式原型属性</strong></li></ol> <p>总结:</p> <div class="language- extra-class"><pre><code>1. 函数的prototype属性: 在定义函数时自动添加的, 默认值是一个空Object对象
2. 对象的\__proto__属性: 创建对象时自动添加的, 默认值为构造函数的prototype属性值
3. 程序员能直接操作显式原型, 但不能直接操作隐式原型(ES6之前)
</code></pre></div><p><strong>示例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">//定义构造函数</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    <span class="token comment">// 内部语句: this.prototype = {}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 1. 每个函数function都有一个prototype，即显式原型属性, 默认指向一个空的Object对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// 2. 每个实例对象都有一个__proto__，可称为隐式原型</span>
  <span class="token comment">//创建实例对象</span>
  <span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 内部语句: this.__proto__ = Fn.prototype</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
  <span class="token comment">// 3. 对象的隐式原型的值为其对应构造函数的显式原型的值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">===</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true</span>
  <span class="token comment">//给原型添加方法</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test()'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//通过实例调用原型的方法</span>
  fn<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/JS%E9%AB%98%E7%BA%A7-%E7%AC%AC%202%20%E9%A1%B5.png" alt="JS高级-第 2 页"></p> <h2 id="_10-原型链"><a href="#_10-原型链" class="header-anchor">#</a> 10. 原型链</h2> <p><strong>别名</strong>: 隐式原型链</p> <p><strong>作用</strong>: 查找对象的属性(方法)</p> <p><strong>总结步骤</strong></p> <ol><li>Object的显式原型的隐式原型为null, 即原型链的尽头</li> <li>访问一个对象的属性时，先在自身属性中查找，找到返回</li> <li>如果没有, 再沿着__proto__这条链向上查找，找到返回，如果到了原型链尽头还是没找到, 返回undefined</li></ol> <h3 id="_10-1-构造函数-原型-实例对象的关系"><a href="#_10-1-构造函数-原型-实例对象的关系" class="header-anchor">#</a> 10.1 构造函数/原型/实例对象的关系</h3> <ol><li>对于每一个函数, 包括Object构造函数, 都有一个隐式原型指向Function构造函数的显式原型, 即每一个函数都是Function构造函数的实例</li> <li>Function也是一个构造函数, 因此它的隐式原型指向它自己的显式原型, 即Function也是自己的实例</li> <li>prototype也是一个对象, 因此它的隐式原型指向Object构造函数的显式原型, 即所有的prototype是Object构造函数的实例</li> <li>Object的显式原型也有隐式原型, 由于它已经是原型链的尽头所以值为null</li></ol> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/%E7%AC%AC%203%20%E9%A1%B5.png" alt="第 3 页"></p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/%E7%AC%AC%204%20%E9%A1%B5.png" alt="第 4 页"></p> <h3 id="_10-2-属性问题"><a href="#_10-2-属性问题" class="header-anchor">#</a> 10.2 属性问题</h3> <ol><li><strong>读取</strong>对象的属性值时：会自动到原型链中查找</li> <li><strong>设置</strong>对象的属性值时：不会查找原型链, 如果当前对象中没有此属性, 直接添加此属性并设置其值</li> <li>方法一般定义在原型中, 属性一般通过构造函数定义在对象本身上</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'xxx'</span>
  <span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn1<span class="token punctuation">)</span>

  <span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fn2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'yyy'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>

  <span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>__proto__<span class="token operator">===</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_10-3-探索instanceof"><a href="#_10-3-探索instanceof" class="header-anchor">#</a> 10.3 探索instanceof</h3> <ol><li>instance是如何判断的
<ul><li>表达式: <code>A instanceof B</code></li> <li><strong>如果B函数的显式原型在A函数的原型链上则返回true，否则返回false</strong></li></ul></li> <li>Function是通过new自己产生的实例</li></ol> <p><strong>例子</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>  <span class="token comment">//true  Function.__proto__.__proto__ === Object.prototype </span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>    <span class="token comment">//true  Object.__proto__.__proto__ === Object.prototype</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Functon</span>   <span class="token comment">//true  Object.__proto__ === Function.prototype</span>
Function <span class="token keyword">instanceof</span> <span class="token class-name">Function</span>    <span class="token comment">//true  Function.__proto__ === Function.prototype</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">foo</span>   <span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/image-20220130163629484.png" alt="image-20220130163629484"></p> <h3 id="_10-4-属性问题"><a href="#_10-4-属性问题" class="header-anchor">#</a> 10.4 属性问题</h3> <ol><li><strong>读取</strong>对象的属性值时：会自动到原型链中查找</li> <li><strong>设置</strong>对象的属性值时：不会查找原型链，如果当前对象中没有此属性, 直接添加此属性并设置其值</li> <li><strong>方法</strong>一般定义在原型中，<strong>属性</strong>一般通过构造函数定义在对象本身上</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'xxx'</span>
  <span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn1<span class="token punctuation">)</span>

  <span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  fn2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'yyy'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">.</span>a<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>

  <span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  p2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>__proto__<span class="token operator">===</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_10-5-相关面试题"><a href="#_10-5-相关面试题" class="header-anchor">#</a> 10.5 相关面试题</h3> <p>面试题一</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">m</span><span class="token operator">:</span><span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">,</span>b<span class="token punctuation">.</span>m<span class="token punctuation">,</span>c<span class="token punctuation">.</span>n<span class="token punctuation">,</span>c<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//1 undefined 2 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>面试题二</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//a </span>
f<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//f.b() is not a function</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//a</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//b</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_11-执行上下文与执行上下文栈"><a href="#_11-执行上下文与执行上下文栈" class="header-anchor">#</a> 11. 执行上下文与执行上下文栈</h2> <h3 id="_11-1-变量提升与函数提升"><a href="#_11-1-变量提升与函数提升" class="header-anchor">#</a> 11.1 变量提升与函数提升</h3> <p><strong>变量声明提升</strong></p> <ol><li><strong>通过var关键字定义的变量</strong>，在这行定义语句前就能访问到</li> <li>值: undefined</li></ol> <p><strong>函数声明提升</strong></p> <ol><li><strong>通过function关键字声明的函数</strong>，在声明之前就能访问到</li> <li>值: 通过function关键字定义的函数本身</li></ol> <p><strong>注1</strong>：<strong>顺序上先变量提升再函数提升，优先级上函数提升高于变量提升</strong>，即如果某变量和某函数同名，则它们都发生了提升，顺序上后提升的函数会<strong>覆盖</strong>掉同名的变量</p> <p><strong>注2</strong>：<strong>在函数中使用未声明的变量会自动声明成全局变量</strong></p> <p><strong>注3</strong>：通过<strong>表达式</strong>定义并被变量接收的函数<strong>不能</strong>函数提升</p> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-----'</span><span class="token punctuation">)</span>
  <span class="token comment">/*
  面试题 : 输出 undefined
   */</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
  <span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token punctuation">}</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//undefined  变量提升</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//可调用  函数提升</span>
  <span class="token comment">// fn3() //不能  变量提升</span>

  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">3</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2()'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn3()'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_11-2-执行上下文"><a href="#_11-2-执行上下文" class="header-anchor">#</a> 11.2 执行上下文</h3> <p><strong>1.代码分类</strong></p> <ol><li>全局代码</li> <li>函数代码</li></ol> <p><strong>2.全局执行上下文</strong></p> <p>1.在执行全局代码前将window确定为全局执行上下文</p> <p>2.对全局数据进行预处理</p> <p>​		①var定义的全局变量---&gt;赋值为undefined, 添加为window的属性</p> <p>​		②function关键字声明的全局函数---&gt;赋值为这个函数, 将全局函数添加为window的方法</p> <p>​		③this---&gt;赋值为window</p> <p>3.开始执行全局代码</p> <p><strong>3.函数执行上下文</strong></p> <p>1.在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象</p> <p>2.对局部数据进行预处理</p> <p>​		①声明形参变量---&gt;赋值为实参---&gt;添加为函数执行上下文的属性</p> <p>​		②arguments---&gt;赋值为实参列表, 添加为函数执行上下文属性</p> <p>​		③var定义的局部变量---&gt;赋值为undefined, 添加为函数执行上下文属性</p> <p>​		④function声明的函数---&gt;赋值为这个函数本身, 添加为函数执行上下文方法</p> <p>​		⑤this---&gt;赋值为调用这个函数的对象</p> <p>3.开始执行函数体代码</p> <p><strong>注1</strong>：执行上下文就是一个函数或者全局代码运行时的环境，里面包括执行时需要用到的数据，可以理解为是一个对象，但它并不是真正的对象，它只是栈内存中被开辟出来的一块区域</p> <p><strong>注2</strong>：函数每次执行都会创建一个新的执行上下文（不管是否重复）</p> <p><strong>注3</strong>：函数每次执行完毕都会销毁这个执行上下文</p> <h3 id="_11-3-执行上下文栈-call-stack"><a href="#_11-3-执行上下文栈-call-stack" class="header-anchor">#</a> 11.3 执行上下文栈(call stack)</h3> <ol><li>在全局代码执行前, JS引擎就会创建一个栈来存储管理所有的执行上下文</li> <li>在全局执行上下文(window)确定后, 将其添加到栈中(压栈)</li> <li>当一个函数运行时，会在运行前生成一个执行上下文并入栈，函数运行结束就会出栈</li> <li>每次正在运行的函数使用的都是栈顶的上下文</li> <li>栈底永远是全局上下文，当所有的代码执行完后, 栈中只剩下window</li></ol> <p><strong>流程分析图</strong></p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/image-20220130195206113.png" alt="image-20220130195206113"></p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/image-20220130195150008.png" alt="image-20220130195150008"></p> <p>注意上图的情况说明fn函数一定是在bar函数体代码中被调用了</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/image-20220130195215026.png" alt="image-20220130195215026"></p> <h3 id="_11-4-相关面试题"><a href="#_11-4-相关面试题" class="header-anchor">#</a> 11.4 相关面试题</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

  <span class="token comment">/*
   测试题1:  先执行变量提升, 再执行函数提升
   */</span>
  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">var</span> a
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span> <span class="token comment">// 'function'</span>


  <span class="token comment">/*
   测试题2
   ES5中没有块作用域的概念，所以var声明的变量仍然有变量提升
   相当于先在全局中声明变量b，值为undefined，但赋值为1仍需在if块中执行
   但此时b已经是window的属性了，所以进不到if的语句执行块中，最后只能直接打印
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>b <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined</span>

  <span class="token comment">/*
   测试题3
   */</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>重点说下测试题3，报错的原因是存在变量提升与函数提升，这两种提升都是在预处理阶段执行的，但是预处理阶段无论是全局还是函数执行上下文，var定义的变量都要被赋值为undefined，然后就结束了，开始执行全局/函数体代码，<strong>这阶段一开始</strong>才会对var定义的变量进行真正值的赋值操作（仍在其他非声明代码前），即执行的代码等同于下面的效果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> c<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
	<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>所以虽然函数名也是c，但c最后又被覆盖成了一个字面量1，自然就会报错c不是一个函数了。</p> <h2 id="_12-作用域与作用域链"><a href="#_12-作用域与作用域链" class="header-anchor">#</a> 12. 作用域与作用域链</h2> <h3 id="_12-1-作用域"><a href="#_12-1-作用域" class="header-anchor">#</a> 12.1 作用域</h3> <p><strong>理解</strong></p> <div class="language- extra-class"><pre><code>1. 作用域就是一块&quot;地盘&quot;, 一个代码段所在的区域
2. **它是静态的(相对于上下文对象), 在编写代码时就确定了**
</code></pre></div><p><strong>分类</strong></p> <div class="language- extra-class"><pre><code>1. 全局作用域
2. 函数作用域
3. 没有块作用域(ES6有了)
</code></pre></div><p><strong>起到的作用</strong></p> <ul><li>隔离变量，不同作用域下同名变量不会有冲突</li></ul> <h3 id="_12-2-作用域与执行上下文"><a href="#_12-2-作用域与执行上下文" class="header-anchor">#</a> 12.2 作用域与执行上下文</h3> <p><strong>区别1</strong></p> <ol><li>全局作用域之外，每个函数都会创建自己的作用域</li> <li>函数作用域在<strong>函数定义时</strong>而非函数调用时创建</li> <li>全局执行上下文环境是在全局作用域确定之后, js代码马上执行之前创建</li> <li>函数执行上下文在调用函数时, 函数体代码执行前创建</li></ol> <p><strong>区别2</strong></p> <ol><li>作用域是静态的, 只要函数定义好后就一直存在且不会再变化</li> <li>执行上下文是动态的, 调用函数时创建, 函数执行完成后自动销毁</li></ol> <p><strong>联系</strong></p> <ol><li>作用域从属于所在的执行上下文</li> <li>全局作用域==&gt;全局执行上下文</li> <li>函数作用域==&gt;函数执行上下文</li></ol> <h3 id="_12-3-作用域链"><a href="#_12-3-作用域链" class="header-anchor">#</a> 12.3 作用域链</h3> <p><strong>理解</strong></p> <ol><li>多个上下级关系的作用域形成的链的方向是从内向外的</li> <li>查找变量时是沿着作用域链来查找的</li></ol> <p><strong>查找一个变量的规则</strong></p> <ol><li>在当前作用域下的执行上下文中查找对应属性, 有则返回，没有则进入第二步</li> <li>在上一级作用域下的执行上下文中查找对应属性, 有则返回，没有则进入第三步</li> <li>依次执行第二步，直到处在全局作用域中, 在全局上下文中查找对应属性, 有则返回，没有就抛出找不到的异常</li></ol> <h2 id="_13-闭包"><a href="#_13-闭包" class="header-anchor">#</a> 13. 闭包</h2> <h3 id="_13-1-理解闭包"><a href="#_13-1-理解闭包" class="header-anchor">#</a> 13.1 理解闭包</h3> <p><strong>一、如何产生闭包?</strong></p> <div class="language- extra-class"><pre><code>1. 当一个嵌套的内部(子)函数引用了嵌套的外部(父)函数的变量/函数时, 就产生了闭包
2. **执行嵌套的外部函数定义**就会产生闭包(不用调用嵌套的内部函数)
</code></pre></div><p>注：2021年后需要调用内部函数才能产生闭包</p> <p><strong>二、闭包到底是什么?</strong></p> <ul><li>理解一: 闭包是嵌套的内部函数(常见理解)</li> <li>理解二: 包含被引用变量(函数)的对象</li></ul> <p>注1: 闭包存在于嵌套的内部函数中</p> <p>注2：闭包可以理解为<strong>能够读取其他函数内部变量的函数</strong>，由于在JavaScript中，<strong>只有函数内部的子函数才能读取局部变量</strong>，因此可以把闭包简单理解成&quot;<strong>定义在一个函数内部的函数</strong>&quot;。</p> <p><strong>三、产生闭包的条件?</strong></p> <ol><li>函数嵌套</li> <li>内部函数引用了外部函数的数据(变量/函数)</li></ol> <p><strong>参照链接</strong></p> <p>https://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html</p> <h3 id="_13-2-常见闭包"><a href="#_13-2-常见闭包" class="header-anchor">#</a> 13.2 常见闭包</h3> <ol><li>将函数作为另一个函数的返回值</li> <li>将函数作为实参传递给另一个函数调用</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">// 1. 将函数作为另一个函数的返回值</span>
  <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      a<span class="token operator">++</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fn2<span class="token comment">//注意这里返回的是嵌套的内部函数对象</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//所以f接收到的是函数对象f2，加个()才能运行</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>

  <span class="token comment">// 2. 将函数作为实参传递给另一个函数调用</span>
  <span class="token keyword">function</span> <span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token comment">//只有msg是被引用的外部变量，闭包就是这个传进setTimeout的函数</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token comment">//参照13.1节 第二点的注2，setTimeout不是定义在showDelay函数内部的函数，所以此处无闭包</span>
      <span class="token comment">//可以参照阮一峰的文章进行理解</span>
  <span class="token punctuation">}</span>
  <span class="token function">showDelay</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="_13-3-闭包的作用"><a href="#_13-3-闭包的作用" class="header-anchor">#</a> 13.3 闭包的作用</h3> <ol><li>外部函数在执行完毕后，闭包能使外部函数的内部变量仍然存留在内存中, 即延长了变量的生命周期</li> <li>未成为闭包中的变量会在外部函数执行完毕后被释放</li> <li>让函数外部可以操作到函数内部的数据但并非将变量直接暴露给外部</li></ol> <h3 id="_13-4-闭包的生命周期"><a href="#_13-4-闭包的生命周期" class="header-anchor">#</a> 13.4 闭包的生命周期</h3> <ol><li>产生: 在嵌套内部函数定义执行完时就产生了(不是在调用)</li> <li>死亡: 在嵌套的内部函数成为垃圾对象时</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//此时闭包就已经产生了(函数提升, 内部函数对象已经创建了)</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      a<span class="token operator">++</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> fn2
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
  f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//闭包死亡(包含闭包的函数对象成为垃圾对象)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_13-5-闭包的作用-定义js模块"><a href="#_13-5-闭包的作用-定义js模块" class="header-anchor">#</a> 13.5 闭包的作用（定义JS模块）</h3> <ol><li>JS模块是具有特定功能的js文件</li> <li>将所有的数据和功能都封装在一个函数内部(只有在函数作用域中数据才是私有的)</li> <li>只向外暴露一个包含n个方法的<strong>对象或函数</strong>（只有一个方法暴露就函数做返回值，暴露多个方法就返回对象，所有要暴露的函数做该对象的属性）</li> <li>模块的使用者, 只需要通过<strong>模块暴露的对象</strong>调用方法来实现对应的功能</li></ol> <p><strong>示例代码</strong></p> <p>方式一</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  module<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>myModule.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'My atguigu'</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomething() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doOtherthing() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>方式二</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;myModule2.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  myModule2<span class="token punctuation">.</span><span class="token function">doOtherthing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>myModule2.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'My atguigu'</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomething() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doOtherthing() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  window<span class="token punctuation">.</span>myModule2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>或以下代码，声明了window做参数，好处就是<strong>代码压缩</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//私有数据</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'My atguigu'</span>
  <span class="token comment">//操作数据的函数</span>
  <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doSomething() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">doOtherthing</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'doOtherthing() '</span><span class="token operator">+</span>msg<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//向外暴露对象(给外部使用的方法)</span>
  window<span class="token punctuation">.</span>myModule2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">doSomething</span><span class="token operator">:</span> doSomething<span class="token punctuation">,</span>
    <span class="token literal-property property">doOtherthing</span><span class="token operator">:</span> doOtherthing
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_13-6-闭包的缺点及解决"><a href="#_13-6-闭包的缺点及解决" class="header-anchor">#</a> 13.6 闭包的缺点及解决</h3> <p><strong>缺点</strong></p> <div class="language- extra-class"><pre><code>1. 函数执行完后, 函数内的局部变量没有释放, 占用内存时间会变长
2. 容易造成内存泄露
</code></pre></div><p><strong>解决方法</strong></p> <div class="language- extra-class"><pre><code>1. 能不用闭包就不用
2. 及时释放（内部函数成为垃圾对象--&gt;回收闭包）
</code></pre></div><p>**内存溢出：**程序需要的内存超出内存剩余的内存，此时程序运行时出现错误</p> <p>**内存泄露：**占用的内存没有及时释放，内存泄露过多容易导致内存溢出</p> <p><strong>常见的内存泄露</strong></p> <ol><li>意外的全局变量</li> <li>没有及时处理的计时器或回调函数</li> <li>闭包</li></ol> <h3 id="_13-7-相关面试题"><a href="#_13-7-相关面试题" class="header-anchor">#</a> 13.7 相关面试题</h3> <p>代码片段一中object.getNameFunc()返回的是函数对象<code>function(){return this.name;}</code>，此时再加一个()，则执行该函数，但此时该函数不是通过普通对象来调的，所以它的调用者是全局对象window，那么该函数中的this自然指向window，所以返回值是The Window</p> <p>代码片段二的不同点在于用that变量保存了object2对象的地址值，所以调用者仍是全局对象window，但返回的值是object对象里的name属性值</p> <p>只有代码片段二有闭包，因为用到了外层函数的变量that</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">//代码片段一</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//?  the window</span>


  <span class="token comment">//代码片段二</span>
  <span class="token keyword">var</span> name2 <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> object2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name2</span> <span class="token operator">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getNameFunc</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> that<span class="token punctuation">.</span>name2<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>object2<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//?  my object</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>fun(0)没传实参给形参o，则实际等同于fun(0,undefined)，所以a赋值为fun(0)时就已经打印了undefined，此时a是一个内有fun属性（或者说函数）的对象，注意<strong>这个fun函数在一开始定义的时候就成为了一个闭包，引用的外部变量是n</strong>。而n此时的值正是0，接下来a.fun(1)，即调用了<strong>对象a里面的函数fun</strong>，形参m的值为1，所以最后返回的是外部函数fun的调用，也就是fun(1,0)，<strong>因为闭包的缘故，n变量一直存在且值为0</strong>,那么最后的打印结果就是0（打印语句在改变n值前）</p> <p>类似地，a.fun(2)和a.fun(3)都是分开调用，所以n的值一直是0，所以分别输出0,0</p> <p>再来说b，fun(0).fun(1)这部分和前面相差不大，所以分别输出undefined,0，然后fun(0).fun(1).fun(2)，n在fun(0).fun(1)调用后，值已经改为了1，<strong>所以先打印输出1，然后再将n的值变为2</strong>，最后fun(0).fun(1).fun(2).fun(3)也类似，先打印输出2，然后再将n的值变为3。这里的关键点在于<strong>函数表达式是连续调用的，且闭包存在，所以n的值不断被改变，并保存在内存中</strong></p> <p>最后到c，类似于前文分析，c先输出undefined,0，又因为c.fun(2)和c.fun(3)分开调用，<strong>打印语句在改变n值前，所以输出的结果一直都是fun(0).fun(1)执行后赋给n的值，也就是1</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">fun</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//undefined,0,0,0</span>

  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//undefined,0,1,2</span>

  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">//undefined,0,1,1</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h1 id="对象高级"><a href="#对象高级" class="header-anchor">#</a> 对象高级</h1> <h2 id="_14-对象创建模式"><a href="#_14-对象创建模式" class="header-anchor">#</a> 14. 对象创建模式</h2> <h3 id="_14-1-object构造函数模式"><a href="#_14-1-object构造函数模式" class="header-anchor">#</a> 14.1 Object构造函数模式</h3> <ul><li>套路: 先用new关键字创建空对象, 再动态添加新的属性/方法</li> <li>使用场景: 起始时不知道对象内部的数据</li> <li>问题: 语句太多</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function-variable function">setname</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_14-2-对象字面量模式"><a href="#_14-2-对象字面量模式" class="header-anchor">#</a> 14.2 对象字面量模式</h3> <ul><li>套路: 使用{}创建空对象, 再动态添加新的属性/方法</li> <li>使用场景: 起始时已知对象内部的数据</li> <li>问题: 如果创建多个对象, 代码会重复</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setname</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_14-3-工厂模式"><a href="#_14-3-工厂模式" class="header-anchor">#</a> 14.3 工厂模式</h3> <ul><li>套路: 使用工厂函数动态创建对象并返回</li> <li>使用场景: 需要创建多个对象</li> <li>问题: 对象没有具体类型, 都是Object</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function-variable function">setname</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_14-4-自定义构造函数"><a href="#_14-4-自定义构造函数" class="header-anchor">#</a> 14.4 自定义构造函数</h3> <ul><li>套路: 自定义构造函数, 使用new创建</li> <li>使用场景: 需要创建多个类型确定的对象</li> <li>问题: 如果实例化多次会使同样的方法重复占用内存空间</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setname</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_14-5-自定义构造函数-原型对象组合使用"><a href="#_14-5-自定义构造函数-原型对象组合使用" class="header-anchor">#</a> 14.5 自定义构造函数+原型对象组合使用</h3> <ul><li>套路: 自定义构造函数, 使用new创建, 添加方法时使用原型对象来添加</li> <li>使用场景: 需要创建多个类型确定的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
createPerson<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getname</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_15-继承模式"><a href="#_15-继承模式" class="header-anchor">#</a> 15. 继承模式</h2> <h3 id="_15-1-原型链继承"><a href="#_15-1-原型链继承" class="header-anchor">#</a> 15.1 原型链继承</h3> <p><strong>操作步骤</strong></p> <ol><li>定义父类型构造函数</li> <li>给父类型的原型添加方法</li> <li>定义子类型的构造函数</li> <li>创建父类型的实例对象并赋值给子类型的原型（关键一步，此处时原型链能够继承）</li> <li>将子类型原型的构造属性设置为子类型</li> <li>给子类型原型添加方法</li> <li>创建子类型的对象: 可以调用父类型的方法</li></ol> <p><strong>缺点是如果父函数有一个变量为引用类型, 任意一个实例修改这个变量会导致所有实例的相关属性被修改</strong></p> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">//父类型</span>
  <span class="token keyword">function</span> <span class="token function">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>supProp <span class="token operator">=</span> <span class="token string">'Supper property'</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Supper</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSupperProp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>supProp<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//子类型</span>
  <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subProp <span class="token operator">=</span> <span class="token string">'Sub property'</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 子类型的原型为父类型的一个实例对象</span>
  <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 让子类型的原型的constructor指向子类型</span>
  <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub
  <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSubProp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subProp<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  sub<span class="token punctuation">.</span><span class="token function">showSupperProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// sub.toString()</span>
  sub<span class="token punctuation">.</span><span class="token function">showSubProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>  <span class="token comment">// Sub</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/JS%E9%AB%98%E7%BA%A7-%E7%AC%AC%205%20%E9%A1%B5.png" alt="JS高级-第 5 页"></p> <h3 id="_15-2-借用构造函数继承"><a href="#_15-2-借用构造函数继承" class="header-anchor">#</a> 15.2 借用构造函数继承</h3> <ol><li><strong>假继承, 没有继承父类型方法</strong></li> <li><strong>缺点是父类有方法时会被创建多次</strong></li></ol> <p><strong>操作步骤</strong></p> <ol><li>创建父类型构造函数</li> <li>创建子类型构造函数</li> <li>在子类型构造函数中使用call/apply调用父类型构造函数</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>  <span class="token comment">// 相当于: this.Person(name, age)</span>
    <span class="token comment">/*this.name = name
    this.age = age*/</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>age<span class="token punctuation">,</span> s<span class="token punctuation">.</span>price<span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_15-3-寄生式继承"><a href="#_15-3-寄生式继承" class="header-anchor">#</a> 15.3 寄生式继承</h3> <p><strong>缺点是方法没有放到原型中，无法复用</strong></p> <p><strong>操作步骤</strong></p> <ol><li>创建父类型构造函数</li> <li>创建子类型构造函数</li> <li>在子类型构造函数中使用call/apply调用父类型构造函数</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回一个隐式原型为o的实例</span>
    obj<span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> aman <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>aman<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_15-4-组合继承"><a href="#_15-4-组合继承" class="header-anchor">#</a> 15.4 组合继承</h3> <ol><li><strong>借用构造函数继承+原型继承</strong></li> <li><strong>缺点是构造函数执行了两次</strong></li></ol> <p><strong>操作步骤</strong></p> <ol><li>创建父类型构造函数</li> <li>创建子类型构造函数</li> <li>在子类型构造函数中使用call/apply调用父类型构造函数</li></ol> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Student</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setPrice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h1 id="线程机制与事件机制"><a href="#线程机制与事件机制" class="header-anchor">#</a> 线程机制与事件机制</h1> <h2 id="_16-进程与线程"><a href="#_16-进程与线程" class="header-anchor">#</a> 16. 进程与线程</h2> <p><strong>概念</strong></p> <ol><li>进程：程序的一次执行，它占有一片独有的内存空间</li> <li>线程： 进程里的一个独立执行单元，CPU的基本调度单位，是程序执行的一个完整流程</li></ol> <p><strong>要点</strong></p> <ol><li>一个进程中一般至少有一个运行的线程: <strong>主线程</strong>，进程启动后自动创建</li> <li>一个进程中也可以同时运行多个线程</li> <li>一个进程内的数据可以供其中的多个线程直接共享</li> <li>多个进程之间的数据是不能直接共享的，即数据相互独立</li> <li>应用程序必须运行在某个进程的某个线程上</li> <li>线程池: 保存多个线程对象的容器, 实现线程的重复利用</li></ol> <h3 id="_16-1-比较单线程与多线程"><a href="#_16-1-比较单线程与多线程" class="header-anchor">#</a> 16.1 比较单线程与多线程</h3> <p>**多线程优点：**CPU利用效率高</p> <p><strong>多线程缺点</strong></p> <ol><li>创建多线程开销</li> <li>线程间切换开销</li> <li>死锁与状态同步问题</li></ol> <p>**单线程优点：**顺序编程简单易懂
**单线程缺点：**效率低</p> <h3 id="_16-2-浏览器与进程-线程"><a href="#_16-2-浏览器与进程-线程" class="header-anchor">#</a> 16.2 浏览器与进程/线程</h3> <p>Q：浏览器运行是单线程还是多线程？
A：多线程</p> <p>Q：浏览器运行是单进程还是多进程？
A：有单进程如火狐与老版IE 也有多进程如Chrome与新版IE</p> <p>Q：如何查看浏览器是否是多进程运行的呢?</p> <p>A：任务管理器==&gt;进程</p> <h2 id="_17-浏览器内核"><a href="#_17-浏览器内核" class="header-anchor">#</a> 17. 浏览器内核</h2> <ol><li>内核是支撑浏览器运行的最核心的程序</li> <li>不同浏览器的内核可能不一样</li> <li>内核由多个模块组成</li></ol> <p><strong>主线程模块</strong></p> <ol><li>js引擎模块, 负责js的编译与运行</li> <li>html, css文档解析模块, 负责页面文本的解析</li> <li>DOM/CSS模块, 负责DOM/CSS在内存中的相关处理</li> <li>布局和渲染模块, 负责页面的布局与效果的绘制（内存中的对象）</li> <li>...</li></ol> <p><strong>分线程模块</strong></p> <ol><li>定时器模块, 负责定时器管理</li> <li>事件响应模块, 负责事件的管理</li> <li>网络请求模块, 负责ajax请求</li></ol> <h2 id="_18-启动定时器"><a href="#_18-启动定时器" class="header-anchor">#</a> 18. 启动定时器</h2> <p><strong>定时器真的是定时执行吗？</strong></p> <ol><li>无法保证真正定时执行</li> <li>一般会延迟一点, 也可能延迟很长时间</li> <li>延迟很久的情况，一般是因为定时器之外的其他代码执行花费了不少时间</li></ol> <p><strong>定时器的回调函数是在分线程执行的吗？</strong></p> <p>答：不是, js是单线程的</p> <p><strong>定时器如何实现的？</strong></p> <p>答：依靠<strong>事件循环模型</strong>实现</p> <h2 id="_19-js是单线程执行的"><a href="#_19-js是单线程执行的" class="header-anchor">#</a> 19. JS是单线程执行的</h2> <p>如何证明js执行是单线程的？</p> <ol><li>setTimeout()函数是在主线程执行的</li> <li>定时器回调代码只有在运行栈中的代码全部执行完后才执行</li></ol> <p>为什么js要用单线程模式而不是多线程模式？</p> <p>答：作为浏览器脚本语言主要用途在于与用户互动及操作DOM, 这决定必须为单线程执行, 否则有严重的同步问题</p> <h3 id="_19-1-代码分类"><a href="#_19-1-代码分类" class="header-anchor">#</a> 19.1 代码分类</h3> <ul><li>初始化执行代码(同步代码): 包含绑定dom事件监听, 设置定时器, 发送ajax请求的代码</li> <li>回调执行代码(异步代码): 处理回调逻辑</li></ul> <h3 id="_19-2-js引擎执行代码的基本流程"><a href="#_19-2-js引擎执行代码的基本流程" class="header-anchor">#</a> 19.2 js引擎执行代码的基本流程</h3> <p>1.先执行初始化代码, 包含一些特殊代码</p> <ul><li>设置定时器</li> <li>绑定监听</li> <li>发送ajax请求</li></ul> <p>2.某个时刻后再执行回调代码 <strong>（使用alert()能暂停主线程执行与定时器计时）</strong></p> <h2 id="_20-事件循环模型"><a href="#_20-事件循环模型" class="header-anchor">#</a> 20. 事件循环模型</h2> <p><strong>模型的2个重要组成部分</strong></p> <div class="language- extra-class"><pre><code>1. 事件(定时器/DOM事件/Ajax)管理模块
2. 回调队列
</code></pre></div><p><strong>模型的运转流程</strong></p> <div class="language- extra-class"><pre><code>1. 执行初始化代码, 将事件回调函数交给对应模块管理
2. 当事件发生时, 管理模块会将回调函数及其数据添加到回调列队中
3. 只有当初始化代码执行完后(可能要一定时间), 才会遍历读取回调队列中的回调函数执行
</code></pre></div><p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/image-20220131002920361.png" alt="image-20220131002920361"></p> <img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/%E7%AC%AC%206%20%E9%A1%B5.png" alt="第 6 页" style="zoom:67%;"> <h2 id="_21-h5-web-workers多线程"><a href="#_21-h5-web-workers多线程" class="header-anchor">#</a> 21. H5 Web Workers多线程</h2> <p><strong>介绍</strong></p> <ol><li>Web Workers是HTML5的多线程解决方案，JS分线程通过它实现</li> <li>可以将一些大计算量的代码交由Web Workers运行而不冻结用户界面</li> <li>但是子线程完全受主线程控制且不能操作DOM, 因此没有改变JS是单线程的属性</li></ol> <p><strong>不足</strong></p> <ol><li>慢</li> <li>不能跨域加载js</li> <li>worker内代码不能操作dom</li> <li>不是每个浏览器都支持</li></ol> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/JS%E9%AB%98%E7%BA%A7-%E7%AC%AC%207%20%E9%A1%B5.png" alt="JS高级-第 7 页"></p> <p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;数值&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;number&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>计算<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> number <span class="token operator">=</span> input<span class="token punctuation">.</span>value

    <span class="token comment">//创建一个Worker对象</span>
    <span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'worker.js'</span><span class="token punctuation">)</span>
    <span class="token comment">// 绑定接收消息的监听</span>
    worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'主线程接收分线程返回的数据: '</span><span class="token operator">+</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 向分线程发送消息</span>
    worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'主线程向分线程发送数据: '</span><span class="token operator">+</span>number<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// console.log(this) // window</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>worker.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> n<span class="token operator">&lt;=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//递归调用</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> number <span class="token operator">=</span> event<span class="token punctuation">.</span>data
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'分线程接收到主线程发送的数据: '</span><span class="token operator">+</span>number<span class="token punctuation">)</span>
  <span class="token comment">//计算</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
  <span class="token function">postMessage</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'分线程向主线程返回数据: '</span><span class="token operator">+</span>result<span class="token punctuation">)</span>
  <span class="token comment">// alert(result)  alert是window的方法, 在分线程不能调用</span>
  <span class="token comment">// 分线程中的全局对象不再是window, 所以在分线程中不可能更新界面</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=JavaScript%E9%AB%98%E7%BA%A7" title="标签">#JavaScript高级</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/66da93/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JavaScript基础篇</div></a> <a href="/pages/d36ce7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Ajax篇</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/66da93/" class="prev">JavaScript基础篇</a></span> <span class="next"><a href="/pages/d36ce7/">Ajax篇</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/20b1c9/"><div>
            HTTP协议及缓存机制
            <!----></div></a> <span class="date">05-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/666074/"><div>
            开发环境
            <!----></div></a> <span class="date">05-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/be5c86/"><div>
            JS基础知识（一）-变量类型和计算
            <!----></div></a> <span class="date">05-28</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="pangyuetian@126.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/uploadhub" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>uploadhub | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1f1ab57c.js" defer></script><script src="/assets/js/2.091c8f37.js" defer></script><script src="/assets/js/8.301a5091.js" defer></script>
  </body>
</html>
