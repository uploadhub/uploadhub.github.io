<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB篇 | uploadhub的技术博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.png">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.176e62ce.css" as="style"><link rel="preload" href="/assets/js/app.1f1ab57c.js" as="script"><link rel="preload" href="/assets/js/2.091c8f37.js" as="script"><link rel="preload" href="/assets/js/12.366718db.js" as="script"><link rel="prefetch" href="/assets/js/10.35c9e42d.js"><link rel="prefetch" href="/assets/js/11.3b58f631.js"><link rel="prefetch" href="/assets/js/13.65dbf792.js"><link rel="prefetch" href="/assets/js/14.657af822.js"><link rel="prefetch" href="/assets/js/15.da71e392.js"><link rel="prefetch" href="/assets/js/16.144334e1.js"><link rel="prefetch" href="/assets/js/17.0e37f9ea.js"><link rel="prefetch" href="/assets/js/18.ff8e9b5a.js"><link rel="prefetch" href="/assets/js/19.cab971fa.js"><link rel="prefetch" href="/assets/js/20.45cfdf2c.js"><link rel="prefetch" href="/assets/js/21.39c4cf04.js"><link rel="prefetch" href="/assets/js/22.17e124f1.js"><link rel="prefetch" href="/assets/js/23.3ba7fd18.js"><link rel="prefetch" href="/assets/js/24.bf1a22bf.js"><link rel="prefetch" href="/assets/js/25.601ad2dd.js"><link rel="prefetch" href="/assets/js/26.7723d969.js"><link rel="prefetch" href="/assets/js/27.5d68f75e.js"><link rel="prefetch" href="/assets/js/28.558d89d0.js"><link rel="prefetch" href="/assets/js/29.d916adb5.js"><link rel="prefetch" href="/assets/js/3.0324b125.js"><link rel="prefetch" href="/assets/js/30.fbec591c.js"><link rel="prefetch" href="/assets/js/31.f2a0df64.js"><link rel="prefetch" href="/assets/js/32.0a862cdb.js"><link rel="prefetch" href="/assets/js/33.7e64a907.js"><link rel="prefetch" href="/assets/js/34.290a1e37.js"><link rel="prefetch" href="/assets/js/35.28dbf541.js"><link rel="prefetch" href="/assets/js/36.d41e3d4d.js"><link rel="prefetch" href="/assets/js/37.33ae84a9.js"><link rel="prefetch" href="/assets/js/38.b6152a62.js"><link rel="prefetch" href="/assets/js/39.ae208d3a.js"><link rel="prefetch" href="/assets/js/4.8b2eab81.js"><link rel="prefetch" href="/assets/js/40.299bf023.js"><link rel="prefetch" href="/assets/js/41.cfcf2b5a.js"><link rel="prefetch" href="/assets/js/42.28b66853.js"><link rel="prefetch" href="/assets/js/43.6b998c5a.js"><link rel="prefetch" href="/assets/js/44.824d0db9.js"><link rel="prefetch" href="/assets/js/45.c261bc1e.js"><link rel="prefetch" href="/assets/js/46.a1aad033.js"><link rel="prefetch" href="/assets/js/47.c63885dc.js"><link rel="prefetch" href="/assets/js/48.13bb55ab.js"><link rel="prefetch" href="/assets/js/49.17163636.js"><link rel="prefetch" href="/assets/js/5.5682cd95.js"><link rel="prefetch" href="/assets/js/50.26bd7726.js"><link rel="prefetch" href="/assets/js/51.4e9b01ae.js"><link rel="prefetch" href="/assets/js/52.4ee9755c.js"><link rel="prefetch" href="/assets/js/53.91c7a96d.js"><link rel="prefetch" href="/assets/js/54.3bfb94da.js"><link rel="prefetch" href="/assets/js/55.806469e8.js"><link rel="prefetch" href="/assets/js/56.c4d64e33.js"><link rel="prefetch" href="/assets/js/57.f989cf86.js"><link rel="prefetch" href="/assets/js/58.8952330f.js"><link rel="prefetch" href="/assets/js/59.2fda97e5.js"><link rel="prefetch" href="/assets/js/6.c8d84b68.js"><link rel="prefetch" href="/assets/js/60.ad11295c.js"><link rel="prefetch" href="/assets/js/61.c0c67db7.js"><link rel="prefetch" href="/assets/js/7.92d3b2f9.js"><link rel="prefetch" href="/assets/js/8.301a5091.js"><link rel="prefetch" href="/assets/js/9.ccc1366d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.176e62ce.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="uploadhub的技术博客" class="logo"> <span class="site-name can-hide">uploadhub的技术博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2a8510/" class="nav-link">《HTML5和CSS3篇》</a></li><li class="dropdown-subitem"><a href="/pages/66da93/" class="nav-link">《JavaScript基础篇》</a></li><li class="dropdown-subitem"><a href="/pages/d5f3f8/" class="nav-link">《JavaScript高级篇》</a></li><li class="dropdown-subitem"><a href="/pages/d36ce7/" class="nav-link">《Ajax篇》</a></li><li class="dropdown-subitem"><a href="/pages/8f43f3/" class="nav-link">《JavaScript模块化篇》</a></li><li class="dropdown-subitem"><a href="/pages/158cc8/" class="nav-link">《Node.js篇》</a></li><li class="dropdown-subitem"><a href="/pages/54baea/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《MongoDB篇》</a></li><li class="dropdown-subitem"><a href="/pages/93651e/" class="nav-link">《Promise篇》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git篇》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/pages/a1940a/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a1940a/" class="nav-link">《Vue2+Vue3篇》</a></li><li class="dropdown-item"><!----> <a href="/pages/f6h57b/" class="nav-link">《React篇》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/pages/8309a5b876fc95e3/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">一面-基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">二三面-进阶</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/avatar.png"> <div class="blogger-info"><h3>uploadhub</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2a8510/" class="nav-link">《HTML5和CSS3篇》</a></li><li class="dropdown-subitem"><a href="/pages/66da93/" class="nav-link">《JavaScript基础篇》</a></li><li class="dropdown-subitem"><a href="/pages/d5f3f8/" class="nav-link">《JavaScript高级篇》</a></li><li class="dropdown-subitem"><a href="/pages/d36ce7/" class="nav-link">《Ajax篇》</a></li><li class="dropdown-subitem"><a href="/pages/8f43f3/" class="nav-link">《JavaScript模块化篇》</a></li><li class="dropdown-subitem"><a href="/pages/158cc8/" class="nav-link">《Node.js篇》</a></li><li class="dropdown-subitem"><a href="/pages/54baea/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《MongoDB篇》</a></li><li class="dropdown-subitem"><a href="/pages/93651e/" class="nav-link">《Promise篇》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git篇》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/pages/a1940a/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a1940a/" class="nav-link">《Vue2+Vue3篇》</a></li><li class="dropdown-item"><!----> <a href="/pages/f6h57b/" class="nav-link">《React篇》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/pages/8309a5b876fc95e3/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">一面-基础</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">二三面-进阶</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于我</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2a8510/" class="sidebar-link">HTML5和CSS3篇</a></li><li><a href="/pages/66da93/" class="sidebar-link">JavaScript基础篇</a></li><li><a href="/pages/d5f3f8/" class="sidebar-link">JavaScript高级篇</a></li><li><a href="/pages/d36ce7/" class="sidebar-link">Ajax篇</a></li><li><a href="/pages/8f43f3/" class="sidebar-link">JavaScript模块化篇</a></li><li><a href="/pages/158cc8/" class="sidebar-link">Node.js篇</a></li><li><a href="/pages/54baea/" aria-current="page" class="active sidebar-link">MongoDB篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_1-数据库概念" class="sidebar-link">1. 数据库概念</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_2-mongodb简介" class="sidebar-link">2. MongoDB简介</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_3-安装启动mongodb" class="sidebar-link">3. 安装启动MongoDB</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_4-基本结构" class="sidebar-link">4. 基本结构</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_5-常见指令" class="sidebar-link">5. 常见指令</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_6-相关crud操作" class="sidebar-link">6. 相关CRUD操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_6-1-增加-insert" class="sidebar-link">6.1 增加(insert)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_6-2-查找-find" class="sidebar-link">6.2 查找(find)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_6-3-修改-update" class="sidebar-link">6.3 修改(update)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_6-4-删除-remove" class="sidebar-link">6.4 删除(remove)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_6-5-相关练习" class="sidebar-link">6.5 相关练习</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_7-文档间的关系" class="sidebar-link">7. 文档间的关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_7-1-一对一-one-to-one" class="sidebar-link">7.1 一对一(one to one)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_7-2-一对多-one-to-many" class="sidebar-link">7.2 一对多(one to many)</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_7-3-多对多-many-to-many" class="sidebar-link">7.3 多对多(many to many)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_8-投影" class="sidebar-link">8. 投影</a></li><li class="sidebar-sub-header level2"><a href="/pages/54baea/#_9-mongoose模块" class="sidebar-link">9. mongoose模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_9-1-mongoose的常用对象" class="sidebar-link">9.1 mongoose的常用对象</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_9-2-使用mongoose操作数据库" class="sidebar-link">9.2 使用mongoose操作数据库</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_9-3-model的方法" class="sidebar-link">9.3 Model的方法</a></li><li class="sidebar-sub-header level4"><a href="/pages/54baea/#_1-增加" class="sidebar-link">1. 增加</a></li><li class="sidebar-sub-header level4"><a href="/pages/54baea/#_2-查询" class="sidebar-link">2. 查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/54baea/#_3-修改" class="sidebar-link">3. 修改</a></li><li class="sidebar-sub-header level4"><a href="/pages/54baea/#_4-删除" class="sidebar-link">4. 删除</a></li><li class="sidebar-sub-header level4"><a href="/pages/54baea/#_5-计数" class="sidebar-link">5. 计数</a></li><li class="sidebar-sub-header level3"><a href="/pages/54baea/#_9-4-document的方法" class="sidebar-link">9.4 Document的方法</a></li></ul></li></ul></li><li><a href="/pages/93651e/" class="sidebar-link">Promise篇</a></li><li><a href="/note/git/" class="sidebar-link">Git篇</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/web/#前端" data-v-06225672>前端</a></li><li data-v-06225672><a href="/web/#学习笔记" data-v-06225672>学习笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/uploadhub" target="_blank" title="作者" class="beLink" data-v-06225672>uploadhub</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">MongoDB篇<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="_1-数据库概念"><a href="#_1-数据库概念" class="header-anchor">#</a> 1. 数据库概念</h2> <p><strong>问：什么是数据库？</strong>
答：存储数据的仓库</p> <p><strong>问：为什么要有数据库？</strong>
答：首先数据是存储在内存里运行的，如果一断电的话，数据就会丢失，所以可以将数据存储到硬盘（持久化），但是硬盘没有联网，所以有了可以联网也可以存储数据的数据库。</p> <p><strong>问：数据库能做什么？</strong>
答：数据库可以存储数据，并且这些数据还可以连接网络，也就是和硬盘相比，可以不用到处携带，就像是网盘。</p> <p><strong>问：数据库的服务器和客户端</strong>
答：值得注意的是数据库它也是分为服务器和客户端的</p> <blockquote><p>服务器：保存数据的
客户端：操作和存储数据的(CRUD)</p></blockquote> <p><strong>问：关系型和非关系型数据库的区别？</strong></p> <p>总而言之就是：<strong>关系型的数据库是创建表格, 非关系型的是可以创建任意多个文档</strong>。</p> <blockquote><p><strong>1.数据存储方式不同</strong>
关系型和非关系型数据库的主要差异是数据存储的方式。关系型数据天然就是表格式的，因此存储在数据表的行和列中。数据表可以彼此关联协作存储，也很容易提取数据。</p> <p>与其相反，非关系型数据不适合存储在数据表的行和列中，而是大块组合在一起。非关系型数据通常存储在数据集中，就像文档、键值对或者图结构。你的数据及其特性是选择数据存储和提取方式的首要影响因素。</p> <p><strong>2.扩展方式不同</strong></p> <p>SQL和NoSQL数据库最大的差别可能是在扩展方式上，要支持日益增长的需求当然要扩展。
要支持更多并发量，SQL数据库是纵向扩展，也就是说提高处理能力，使用速度更快速的计算机，这样处理相同的数据集就更快了。</p> <p>因为数据存储在关系表中，操作的性能瓶颈可能涉及很多个表，这都需要通过提高计算机性能来客服。虽然SQL数据库有很大扩展空间，但最终肯定会达到纵向扩展的上限。而NoSQL数据库是横向扩展的。</p> <p>而非关系型数据存储天然就是分布式的，NoSQL数据库的扩展可以通过给资源池添加更多普通的数据库服务器(节点)来分担负载。</p> <p><strong>3.对事务性的支持不同</strong></p> <p>如果数据操作需要高事务性或者复杂数据查询需要控制执行计划，那么传统的SQL数据库从性能和稳定性方面考虑是你的最佳选择。SQL数据库支持对事务原子性细粒度控制，并且易于回滚事务。</p></blockquote> <h2 id="_2-mongodb简介"><a href="#_2-mongodb简介" class="header-anchor">#</a> 2. MongoDB简介</h2> <ol><li>MongoDB是一个NoSQL的文档型的数据库</li> <li>MongoDB数据库中存储的数据的基本单位就是文档，MongoDB中存储的就是文档，所谓文档其实就是一个“JSON”</li> <li>MongoDB中的“JSON”我们称为BSON，比普通的JSON的功能要更加的强大</li> <li>MongoDB数据库使用的是JavaScript进行操作的，在MongoDB含有一个对ES标准实现的引擎，</li> <li>在MongoDB中所有ES中的语法中都可以使用</li></ol> <p><strong>MongoDB的优点</strong></p> <ol><li>可以快速开发web型应用，因为灵活，不用像关系型数据库一样需要建表</li> <li>MongoDB存储的是文档（document），文档内存储的是类似json的结构，所谓json就是字符串数组</li></ol> <h2 id="_3-安装启动mongodb"><a href="#_3-安装启动mongodb" class="header-anchor">#</a> 3. 安装启动MongoDB</h2> <p>安装MongoDB，去官网下载并安装，随后将bin文件设置成环境变量path的变量。设置完毕后，还需设置自动启动MongoDB数据库的方式</p> <p><strong>参考链接</strong></p> <p><a href="https://www.cnblogs.com/zhoulifeng/p/9429597.html" target="_blank" rel="noopener noreferrer">MongoDB安装配置教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_4-基本结构"><a href="#_4-基本结构" class="header-anchor">#</a> 4. 基本结构</h2> <table><thead><tr><th style="text-align:center;">概念</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">数据库（database）</td> <td style="text-align:center;">用来存储集合的，而且数据库也有分大小</td></tr> <tr><td style="text-align:center;">集合（collection）</td> <td style="text-align:center;">集合类似于数组，是用于存放文档的</td></tr> <tr><td style="text-align:center;">文档（document）</td> <td style="text-align:center;">文档是MongoDB数据库中最小的单位，我们要操作的目标就是文档</td></tr></tbody></table> <p>MongoDB关系: <strong>数据库（database） &gt; 集合（collection）&gt; 文档（document）</strong></p> <p>注意：<strong>在MongoDB中，数据库和集合都不需要手动创建</strong>。当我们创建文档时，如果文档所在的集合或数据库不存在，则会自动创建数据库和集合</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/MongoDB%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F.png" alt="在这里插入图片描述"></p> <h2 id="_5-常见指令"><a href="#_5-常见指令" class="header-anchor">#</a> 5. 常见指令</h2> <table><thead><tr><th style="text-align:center;">命令</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">net start MongoDB</td> <td style="text-align:center;">开启服务器</td></tr> <tr><td style="text-align:center;">net stop MongoDB</td> <td style="text-align:center;">关闭服务器</td></tr> <tr><td style="text-align:center;">mongo</td> <td style="text-align:center;">开启服务器后，在终端输入mongo便可以连接上数据库，启动客户端</td></tr> <tr><td style="text-align:center;">show dbs<br>show databases</td> <td style="text-align:center;">显示当前的所有数据库</td></tr> <tr><td style="text-align:center;">use 数据库名</td> <td style="text-align:center;">进入到指定的数据库中</td></tr> <tr><td style="text-align:center;">db</td> <td style="text-align:center;">db表示的是当前所处的数据库</td></tr> <tr><td style="text-align:center;">show collections</td> <td style="text-align:center;">显示数据库中所有的集合</td></tr></tbody></table> <h2 id="_6-相关crud操作"><a href="#_6-相关crud操作" class="header-anchor">#</a> 6. 相关CRUD操作</h2> <p>相关API具体内容查看官方文档:	https://mongoosejs.com/</p> <p>核心操作：增insert、删remove、查: find、改: update</p> <h3 id="_6-1-增加-insert"><a href="#_6-1-增加-insert" class="header-anchor">#</a> 6.1 增加(insert)</h3> <blockquote><p>db.集合名.insert(document)：表示增加一个或多个文档</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>{name: <span class="token string">&quot;孙悟空&quot;</span><span class="token punctuation">,</span> age: <span class="token number">28</span><span class="token punctuation">,</span> address:<span class="token string">&quot;花果山&quot;</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	表示向 集合名为piyou插入了文档, 文档内容是对象。
	集合名是自己创建的，想用什么名称就用什么。
*/</span>

db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	{name:<span class="token string">&quot;猪八戒&quot;</span><span class="token punctuation">,</span> age: <span class="token number">38</span><span class="token punctuation">,</span> address:<span class="token string">&quot;高老庄&quot;</span>}<span class="token punctuation">,</span> 
	{name: <span class="token string">&quot;沙和尚&quot;</span><span class="token punctuation">,</span> age: <span class="token number">45</span><span class="token punctuation">,</span> address:<span class="token string">&quot;流沙河&quot;</span>}
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	可以注意到: 传递的数据是数组，数组内部是对象，其实对象就相当于文档，这就是插入了两个文档。
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>db.集合名.insertOne(document,[callback]) ：表示插入一个文档，回调函数callback是可选的</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	表示向集合名为piyou的 插入了一个文档。
*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span>insertOne<span class="token punctuation">(</span>{name:<span class="token string">&quot;唐僧&quot;</span><span class="token punctuation">,</span> age: <span class="token number">18</span><span class="token punctuation">,</span> address: <span class="token string">&quot;女儿国&quot;</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>db.集合名.insertMany(doucment, [callback]);       表示插入多个文档</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	可以看到，用法是和insert是相差不多的。数组里面有对象，对象即是文档。
*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span>insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span>
	{name:<span class="token string">&quot;白骨精&quot;</span><span class="token punctuation">,</span> age:<span class="token number">20</span><span class="token punctuation">,</span>address:<span class="token string">&quot;白骨洞&quot;</span>}<span class="token punctuation">,</span> 
	{name:<span class="token string">&quot;蜘蛛精&quot;</span><span class="token punctuation">,</span> age: <span class="token number">24</span><span class="token punctuation">,</span> address:<span class="token string">&quot;蜘蛛洞&quot;</span>}
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-2-查找-find"><a href="#_6-2-查找-find" class="header-anchor">#</a> 6.2 查找(find)</h3> <p>要想查询上面插入的内容，便可调用查找的方法</p> <blockquote><p>db.集合名.find(condition);			查询一个或多个文档 condition是查询条件
db.集合名.findOne(condition);	    查询一个文档
db.集合名.findMany(condition)		查询多个文档</p></blockquote> <p>以下是查询语句和查询结果：</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/07b6b3f79fe7418d9d6cefe729b67057.png" alt="查询语句和查询结果"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*这条语句表示的是查询age是18的文档。 值得注意的是，条件也是写在了对象里面，
也是因为传入的值需要是json语句*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span>find<span class="token punctuation">(</span>{age:<span class="token number">18</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行结果：</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/be643b64ab5a49b0a73b5a649b4d2bbf.png" alt="在这里插入图片描述"></p> <p>如果想要知道有多少个的时候，则可以使用</p> <blockquote><p>db.集合名.find(condition).count();	使用count()来计数</p></blockquote> <p><strong>总结</strong></p> <ol><li>find()返回的是文档的数组，findOne()返回的就是一个文档</li> <li>findMany()返回的也是数组内存放着文档的形式</li> <li>find()的返回值还可以调用count(),用来获取符合条件的数量</li></ol> <h3 id="_6-3-修改-update"><a href="#_6-3-修改-update" class="header-anchor">#</a> 6.3 修改(update)</h3> <blockquote><p>db.集合名.update(condition,newObject);		修改一个或多个文档
db.集合名.uodateOne(condition,newObject);	修改一个文档
db.集合名.updateMany(condition, newObject);  修改多个文档
<strong>condition</strong>: 查询的条件		<strong>newObject</strong>: 需要修改的语句</p></blockquote> <p>首先需要注意的是，在使用update()时，需要一个新的玩意加入，叫做<strong>修改操作符</strong>，如下:</p> <table><thead><tr><th style="text-align:center;">修改操作符</th> <th style="text-align:center;">用处</th></tr></thead> <tbody><tr><td style="text-align:center;">$set</td> <td style="text-align:center;">表示需要设置指定的属性</td></tr> <tr><td style="text-align:center;">$unset</td> <td style="text-align:center;">表示需要删除指定的属性</td></tr> <tr><td style="text-align:center;">$push</td> <td style="text-align:center;">表示给数组添加一个新元素，因为文档内也会有数组，数组便会有数组元素</td></tr> <tr><td style="text-align:center;">$addToset</td> <td style="text-align:center;">表示给数组添加一个新元素，和push的区别是，如果出现同名的数组元素，则不会再添加</td></tr> <tr><td style="text-align:center;">$gt</td> <td style="text-align:center;">大于</td></tr> <tr><td style="text-align:center;">$gte</td> <td style="text-align:center;">大于等于</td></tr> <tr><td style="text-align:center;">$lt</td> <td style="text-align:center;">小于</td></tr> <tr><td style="text-align:center;">$lte</td> <td style="text-align:center;">小于等于</td></tr> <tr><td style="text-align:center;">$or [{条件一,条件二}]</td> <td style="text-align:center;">表示或的意思，符合条件一或者条件二</td></tr> <tr><td style="text-align:center;">$inc</td> <td style="text-align:center;">表示自增，在原来数据的基础上对数据加减</td></tr></tbody></table> <p>所以不能像下面这条语句这样使用，这样使用的话，会使用{age :18}覆盖掉{name:“猪八戒”…}这整条语句。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;猪八戒&quot;</span>}<span class="token punctuation">,</span> {age:<span class="token number">39</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行结果，可以看到猪八戒这整条数据不见了，那么应该怎么操作呢？这时候修改操作符就派上用场了</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/af8d4da31a5d473c853a733aaaaa3f3a.png" alt="在这里插入图片描述"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*	
	表示根据条件{name:&quot;孙悟空&quot;}, 找到了孙悟空的这个文档, 使用了$set(修改指定属性)
	这个修改操作符，将age修改成了29
*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;孙悟空&quot;</span>}<span class="token punctuation">,</span> {$<span class="token keyword">set</span>:{age:<span class="token number">29</span>}}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>执行结果：</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/acb75591142b4ecf88e31ed2e63fb43d.png" alt="在这里插入图片描述"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	表示使用 $unset(删除指定属性), 将唐僧的address的属性值给删掉了
*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span><span class="token keyword">update</span><span class="token punctuation">(</span>{name:<span class="token string">&quot;唐僧&quot;</span>}<span class="token punctuation">,</span> {$unset:{address: <span class="token number">1</span>}}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行结果,唐僧的address的值已经被删除了</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/b6573d58ddd542569cba09c48fe650da.png" alt="在这里插入图片描述"></p> <h3 id="_6-4-删除-remove"><a href="#_6-4-删除-remove" class="header-anchor">#</a> 6.4 删除(remove)</h3> <blockquote><p>db.集合名.remove(condition)		删除符合条件的一个或多个文档
db.集合名.deleteOne(condition)	删除符合条件的一个文档
db.集合名.deleteMany(condition)	删除符合条件的多个文档</p> <p>db.集合名.remove(condition)  清空一个集合
db.集合名.drop()  删除一个集合
db.dropDatabase()  删除一个数据库</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	表示删除了符合 age为39 这个条件的一个或多个文档。
	也就是删掉了刚刚那个猪八戒的那条语句
*/</span>
db<span class="token punctuation">.</span>piyou<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>{age: <span class="token number">39</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>执行结果：</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/7d846effa5c149e3ada67d93e503392a.png" alt="在这里插入图片描述"></p> <h3 id="_6-5-相关练习"><a href="#_6-5-相关练习" class="header-anchor">#</a> 6.5 相关练习</h3> <p>先看能不能读懂下面这条语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
	    name:<span class="token string">&quot;大大白&quot;</span><span class="token punctuation">,</span> 
	    age: <span class="token number">28</span><span class="token punctuation">,</span> 
	    hobby:{
	        music:<span class="token punctuation">[</span><span class="token string">'new Boy'</span><span class="token punctuation">,</span> <span class="token string">'云烟成雨'</span><span class="token punctuation">,</span> <span class="token string">'秋酿'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	        games:<span class="token punctuation">[</span><span class="token string">'王者荣耀'</span><span class="token punctuation">,</span> <span class="token string">'和平精英'</span><span class="token punctuation">,</span> <span class="token string">'光遇'</span><span class="token punctuation">]</span>
	    }
    }<span class="token punctuation">,</span>
    {
        name: <span class="token string">&quot;小白&quot;</span><span class="token punctuation">,</span>
        age: <span class="token number">21</span><span class="token punctuation">,</span>
        hobby:{
            movies:<span class="token punctuation">[</span><span class="token string">'大话西游'</span><span class="token punctuation">,</span> <span class="token string">'唐伯虎点秋香'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            games:<span class="token punctuation">[</span><span class="token string">'王者荣耀'</span><span class="token punctuation">,</span> <span class="token string">'旅行青蛙'</span><span class="token punctuation">,</span> <span class="token string">'穿越火线'</span><span class="token punctuation">]</span>
        }
    }
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>语句解释：
向集合persons中插入一个数组，数组中有两个文档，文档内有一个hobby的文档，
这个hobby文档被称作内嵌文档，然后hobby文档内有两个数组。</p> <p>需求一：查询喜欢玩 王者荣耀 的人</p> <p>分析:王者荣耀是存在于hobby中的games</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这是需要注意的知识点:如果查询的是内嵌文档可以使用 . 的方式查询，
	不过需要使用引号，这是因为mongodb的文档是json的缘故吧。
*/</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span>find<span class="token punctuation">(</span>{<span class="token string">&quot;hobby.games&quot;</span>:<span class="token string">&quot;王者荣耀&quot;</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>需求二: 插入20000条数据，有哪种是比较快捷的方式？
方式一：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这是方式一，这种方式是需要调用insert语句20000次，效率会十分低下，那么可不可以，
	只调用一次insert语句呢？如果可以的话，应该怎么实现呢？
	可以将数据先存储起来，然后一次性加入。
*/</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20000</span><span class="token punctuation">;</span> i<span class="token operator">+</span><span class="token operator">+</span><span class="token punctuation">)</span>{
    db<span class="token punctuation">.</span>nums<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>{num:i}<span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>方式二:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这是将数据全部存到了数组中，随后再将数组插入，只执行了一次insert语句。
*/</span>
const arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20000</span><span class="token punctuation">;</span> i<span class="token operator">+</span><span class="token operator">+</span><span class="token punctuation">)</span>{
    arr<span class="token punctuation">.</span>push<span class="token punctuation">(</span>{num:i}<span class="token punctuation">)</span><span class="token punctuation">;</span>
}
db<span class="token punctuation">.</span>nums<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_7-文档间的关系"><a href="#_7-文档间的关系" class="header-anchor">#</a> 7. 文档间的关系</h2> <h3 id="_7-1-一对一-one-to-one"><a href="#_7-1-一对一-one-to-one" class="header-anchor">#</a> 7.1 一对一(one to one)</h3> <blockquote><p>内嵌文档
例子：夫妻关系</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	可以看到一个妻子是对应一个丈夫的，这是使用内嵌文档来实现的。
*/</span>
db<span class="token punctuation">.</span>wife<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
        name:<span class="token string">&quot;黄蓉&quot;</span><span class="token punctuation">,</span>
        age: <span class="token number">26</span><span class="token punctuation">,</span>
        handsband:{
            name:<span class="token string">&quot;郭靖&quot;</span><span class="token punctuation">,</span>
            age: <span class="token number">38</span>
        }
    }<span class="token punctuation">,</span>
    {
        name: <span class="token string">&quot;小兰&quot;</span><span class="token punctuation">,</span>
        age: <span class="token number">16</span><span class="token punctuation">,</span>
        handsband:{
            name: <span class="token string">&quot;新一&quot;</span><span class="token punctuation">,</span>
            age: <span class="token number">16</span>
        }
    }
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_7-2-一对多-one-to-many"><a href="#_7-2-一对多-one-to-many" class="header-anchor">#</a> 7.2 一对多(one to many)</h3> <blockquote><p>例子：父母 - 孩子、文章 - 评论
-- 内嵌文档也可以实现，就是一个文档内嵌多个文档，不过比较繁琐
-- 用户一个文档，订单一个文档，在使用的时候再一一对应</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*第一句是创建了两个用户, 分别是花木兰和诸葛亮*/</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>{name:<span class="token string">&quot;花木兰&quot;</span>}<span class="token punctuation">,</span> {name:<span class="token string">&quot;诸葛亮&quot;</span>}<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*这一句是查询用户内容， 这是需要知道用户的_id，从而在第三句加入*/</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*这是生成了一个订单，并且user_id存储的是花木兰的id*/</span>
db<span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>{list_name:<span class="token punctuation">[</span><span class="token string">&quot;配马&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;鞍鞯&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> user_id: ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61374eac77393663e2de9bd3&quot;</span><span class="token punctuation">)</span>}<span class="token punctuation">)</span>
<span class="token comment">/*再生成了一个订单，并且user_id存储的是花木兰的id*/</span>
db<span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span>{list_name:<span class="token punctuation">[</span><span class="token string">&quot;蜜糖&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;男装&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> user_id: ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61374eac77393663e2de9bd3&quot;</span><span class="token punctuation">)</span>}<span class="token punctuation">)</span>
<span class="token comment">/*在users里查找到 花木兰 这个用户的id，并将其存储起来*/</span>
let userId <span class="token operator">=</span> db<span class="token punctuation">.</span>users<span class="token punctuation">.</span>findOne<span class="token punctuation">(</span>{name:<span class="token string">&quot;花木兰&quot;</span>}<span class="token punctuation">)</span><span class="token punctuation">.</span>_id<span class="token punctuation">;</span>
<span class="token comment">/*使用id来查找*/</span>
db<span class="token punctuation">.</span>orders<span class="token punctuation">.</span>find<span class="token punctuation">(</span>{user_id: userId}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_7-3-多对多-many-to-many"><a href="#_7-3-多对多-many-to-many" class="header-anchor">#</a> 7.3 多对多(many to many)</h3> <blockquote><p>例子：学生 - 老师、商品 - 分类
-- 可以使用内嵌文档的形式完成</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>db<span class="token punctuation">.</span>teas<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>{name:<span class="token string">&quot;诸葛亮&quot;</span>}<span class="token punctuation">,</span> {name:<span class="token string">&quot;龟仙人&quot;</span>}<span class="token punctuation">,</span> {name:<span class="token string">&quot;唐僧&quot;</span>}<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>teas<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>stus<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
        name: <span class="token string">&quot;孙悟空&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">/*插入的是 龟仙人和唐僧的id*/</span>
        teas_id:<span class="token punctuation">[</span>ObjectId<span class="token punctuation">(</span><span class="token string">&quot;6137552877393663e2de9bdb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;6137552877393663e2de9bdc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    }<span class="token punctuation">,</span>
    {
        name: <span class="token string">&quot;刘禅&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">/*插入的是 诸葛亮和龟仙人的id*/</span>
        teas_id:<span class="token punctuation">[</span>ObjectId<span class="token punctuation">(</span><span class="token string">&quot;6137552877393663e2de9bda&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ObjectId<span class="token punctuation">(</span><span class="token string">&quot;6137552877393663e2de9bdb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    }
        
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

db<span class="token punctuation">.</span>stus<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_8-投影"><a href="#_8-投影" class="header-anchor">#</a> 8. 投影</h2> <p>投影就是添加限制条件，显示按这些条件进行操作后的效果</p> <p>首先先创建一个集合：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这样创建的是一个列表集合。
*/</span>
db<span class="token punctuation">.</span>staff<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {name:<span class="token string">&quot;小白&quot;</span><span class="token punctuation">,</span> age: <span class="token number">18</span><span class="token punctuation">,</span> salary: <span class="token number">3000</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;大白&quot;</span><span class="token punctuation">,</span> age: <span class="token number">19</span><span class="token punctuation">,</span> salary: <span class="token number">3500</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;熊大&quot;</span><span class="token punctuation">,</span> age: <span class="token number">23</span><span class="token punctuation">,</span> salary: <span class="token number">3200</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;熊二&quot;</span><span class="token punctuation">,</span> age: <span class="token number">22</span><span class="token punctuation">,</span> salary: <span class="token number">3100</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;光头强&quot;</span><span class="token punctuation">,</span> age: <span class="token number">27</span><span class="token punctuation">,</span> salary: <span class="token number">3400</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;小鲤鱼&quot;</span><span class="token punctuation">,</span> age: <span class="token number">17</span><span class="token punctuation">,</span> salary: <span class="token number">1500</span>}<span class="token punctuation">,</span>
    {name:<span class="token string">&quot;奥特曼&quot;</span><span class="token punctuation">,</span> age: <span class="token number">39</span><span class="token punctuation">,</span> salary: <span class="token number">4500</span>}
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>需求一:按照薪资排列，可以使用sort()方法</p> <blockquote><p><strong>sort(condition)</strong>
sort({salary:  1})表示按照薪资升序排列
sort({salary: -1})表示按照薪资降序排列</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>db<span class="token punctuation">.</span>staff<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span>{salary: <span class="token number">1</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>排列结果:</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/fa6dd5907b1140eaaff6b6675fe38d5d.png" alt="在这里插入图片描述"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这句的含义是按照薪资升序排序，如果出现了相同的薪资的人，
	则按照年龄降序排序。
*/</span>
db<span class="token punctuation">.</span>staff<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort<span class="token punctuation">(</span>{salary: <span class="token number">1</span><span class="token punctuation">,</span> age: <span class="token operator">-</span><span class="token number">1</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>limit() 限制 和skip() 跳过</p> <p>这两个方法经常可以一起使用,从而用来翻页，而且这两个方法是可以不分先后的</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*表示只会显示前两个数据*/</span>
db<span class="token punctuation">.</span>staff<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行结果:</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/4c1a6c4b8b0547e6a99e8253abc2e016.png" alt="在这里插入图片描述"></p> <blockquote><p>在查询时可以在find()中的第二个参数的位置传入<strong>投影</strong>
{name: 1, _id: 0}： 表示显示name属性，不显示_id属性</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
	这句的含义是只显示 name和salary属性，不显示 _id属性
*/</span>
db<span class="token punctuation">.</span>staff<span class="token punctuation">.</span>find<span class="token punctuation">(</span>{}<span class="token punctuation">,</span> {name: <span class="token number">1</span><span class="token punctuation">,</span> _id: <span class="token number">0</span><span class="token punctuation">,</span> salary: <span class="token number">1</span>}<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行结果:</p> <p><img src="https://getpic.oss-cn-shenzhen.aliyuncs.com/b71fbad8e8e14af6b437724548a93ea0.png" alt="在这里插入图片描述"></p> <h2 id="_9-mongoose模块"><a href="#_9-mongoose模块" class="header-anchor">#</a> 9. mongoose模块</h2> <p><strong>问1：什么是mongoose?</strong></p> <ol><li>一般我们不会直接用MongoDB的函数来操作MongoDB数据库 ，而mongose就是一套操作MongoDB数据库的接口</li> <li>简而言之就是:mongoose也可以操作MongoDB，而且用它来操作数据库会有更多好处</li> <li>mongoose是一个npm模块</li></ol> <p><strong>问2：为什么要使用mongoose? mongoose的优点有哪些？</strong></p> <ol><li>可以为mongodb的文档创建一个模式结构(Schema),说白了就是一个<strong>约束的条件</strong></li> <li>比原生的Node相比更容易操作mongodb数据库，也就是<strong>更方便</strong></li> <li>可以使用中间件和其他的应用业务挂钩，可以和其他的应用<strong>结合使用</strong></li> <li>数据可以通过类型转换转换成对象模型，也就是可以使用<strong>方法</strong></li></ol> <h3 id="_9-1-mongoose的常用对象"><a href="#_9-1-mongoose的常用对象" class="header-anchor">#</a> 9.1 mongoose的常用对象</h3> <table><thead><tr><th style="text-align:center;">对象</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">Schema(模式对象)</td> <td style="text-align:center;">定义了约束MongoDB的文档结构的条件</td></tr> <tr><td style="text-align:center;">Model</td> <td style="text-align:center;">相当于MongoDB中的 collection(集合)</td></tr> <tr><td style="text-align:center;">Document</td> <td style="text-align:center;">Document表示集合中的具体文档</td></tr></tbody></table> <p>注意：这三个都是对象，是对象的话则有它们对应的方法和属性</p> <h3 id="_9-2-使用mongoose操作数据库"><a href="#_9-2-使用mongoose操作数据库" class="header-anchor">#</a> 9.2 使用mongoose操作数据库</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//当需要在webstorm或vscode时编写mongoose时,需要先将mongoose模块引入。步骤如下:</span>
<span class="token comment">//1、下载安装 在终端输入命令行: npm i mongoose --save</span>
<span class="token comment">//2、引入mongose模块</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3、 连接MongoDB数据库</span>
<span class="token comment">//端口号是默认的 (27017), 则可以省略不写</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://数据库的ip地址:端口号/数据库名'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4、断开连接(一般不用)</span>
<span class="token comment">//一般只需要链接一次</span>
mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//监听MongoDB数据库的连接状态</span>
<span class="token comment">//在momgoose对象中, 有一个属性叫 connnection 用来监视数据库的链接状态</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>而连接到MongoDB数据库前后则有以下操作步骤</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//1、导入mongoose模块	 </span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2、连接数据库并且监听	 </span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://数据库ip地址:端口/数据库名称&quot;</span><span class="token punctuation">)</span>；
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token operator">+</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3、创建Schema约束条件</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>	将Schema重命名
<span class="token keyword">const</span> schema约束条件 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span>约束的内容<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4、创建Model</span>
<span class="token keyword">const</span> 模型Model <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'mongodb的集合名'</span><span class="token punctuation">,</span> schema约束条件<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//5、插入文档</span>
<span class="token comment">//使用 模型Model,插入文档</span>
模型model<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>文档document<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>示例代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1、引入 mongoose 模块</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2、连接数据库    27017是默认端口号，可以省略不写， ppxia是需要连接的数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/ppxia'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.1、这是对数据库的监听，而且是使用once, 只监听一次就行了</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;数据库已连接...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;数据库已断开!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3、重命名，简化操作</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>

<span class="token comment">// 3.1、创建了约束条件:type是类型，default是默认是女，如果是女的话则不用写性别这个属性值了。</span>
<span class="token keyword">const</span> stuSch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">&quot;女&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span>String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4、创建了 模型， 数据库中的集合名是 stuSch(会自动加s), 第二个参数是标准，即是约束条件: stuSch</span>
<span class="token keyword">const</span> stuModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'stuSch'</span><span class="token punctuation">,</span> stuSch<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5、使用模型创建对象, 当想创建多个的时候，可以使用数组里面存储对象的方式</span>
stuModel<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;西施&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;王者峡谷&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文档创建成功~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_9-3-model的方法"><a href="#_9-3-model的方法" class="header-anchor">#</a> 9.3 Model的方法</h3> <h4 id="_1-增加"><a href="#_1-增加" class="header-anchor">#</a> 1. 增加</h4> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">作用</th></tr></thead> <tbody><tr><td style="text-align:center;">Model.create(doc,[callback]);</td> <td style="text-align:center;">创建一个或多个对象</td></tr> <tr><td style="text-align:center;">Model.createOne(doc, [callback]);</td> <td style="text-align:center;">创建一个对象</td></tr> <tr><td style="text-align:center;">Model.createMany(doc, [callback]);</td> <td style="text-align:center;">创建多个对象</td></tr></tbody></table> <ol><li>参数doc是需要插入的文档</li> <li>参数callback(err) 是回调函数，可以用来提示是否创建成功了</li></ol> <h4 id="_2-查询"><a href="#_2-查询" class="header-anchor">#</a> 2. 查询</h4> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">Model.find(condition, 投影, [options], [callback]);</td> <td style="text-align:center;">查询一个或多个文档<br>返回的是文档数组</td></tr> <tr><td style="text-align:center;">Model.findById(id, 投影, [callback]);</td> <td style="text-align:center;">根据id查询一个文档</td></tr> <tr><td style="text-align:center;">Model.findMany(condition, 投影. [callback]);</td> <td style="text-align:center;">查询符合条件的多个文档</td></tr> <tr><td style="text-align:center;">Model.findOne(condition, [projection], [options], [callback]);</td> <td style="text-align:center;">查询符合条件的第一个匹配文档</td></tr></tbody></table> <p>涉及到的参数如下：</p> <table><thead><tr><th style="text-align:center;">参数</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">condition</td> <td style="text-align:center;">查询条件</td></tr> <tr><td style="text-align:center;">投影/ projection</td> <td style="text-align:center;">投影，也就是 查询条件，有两种方式<br>			{name: 1, _id:0}: 1是显示，0是不显示<br>&quot;name  -_id&quot;显示name, 不显示 _id</td></tr> <tr><td style="text-align:center;">options</td> <td style="text-align:center;">查询的选项, skip是跳过，limit是限制 {skip: 3, limit:3}</td></tr> <tr><td style="text-align:center;">Model.findOne(condition, [projection], [options], [callback]);</td> <td style="text-align:center;">查询一个文档</td></tr> <tr><td style="text-align:center;">callback</td> <td style="text-align:center;">回调函数,有两个参数(err, doc) err是错误类型, doc是文档</td></tr></tbody></table> <h4 id="_3-修改"><a href="#_3-修改" class="header-anchor">#</a> 3. 修改</h4> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">Model.updateMany(condition, doc, [options], [callback]);</td> <td style="text-align:center;">修改符合条件的多个文档</td></tr> <tr><td style="text-align:center;">Model.updateOne(condition, doc, [options], callback);</td> <td style="text-align:center;">修改符合条件的第一个匹配文档</td></tr></tbody></table> <ol><li>参数<strong>condition</strong>是修改的条件</li> <li>参数<strong>doc</strong>是修改后的内容/需要修改的内容</li></ol> <p>需要配合修改操作符来使用:</p> <table><thead><tr><th style="text-align:center;">修改操作符</th> <th style="text-align:center;">用处</th></tr></thead> <tbody><tr><td style="text-align:center;">$set</td> <td style="text-align:center;">表示需要设置指定的属性</td></tr> <tr><td style="text-align:center;">$unset</td> <td style="text-align:center;">表示需要删除指定的属性</td></tr> <tr><td style="text-align:center;">$push</td> <td style="text-align:center;">表示给数组添加一个新元素，因为文档内也会有数组，数组便会有数组元素</td></tr> <tr><td style="text-align:center;">$addToset</td> <td style="text-align:center;">表示给数组添加一个新元素，和push的区别是，如果出现同名的数组元素，则不会再添加</td></tr> <tr><td style="text-align:center;">$gt</td> <td style="text-align:center;">大于</td></tr> <tr><td style="text-align:center;">$gte</td> <td style="text-align:center;">大于等于</td></tr> <tr><td style="text-align:center;">$lt</td> <td style="text-align:center;">小于</td></tr> <tr><td style="text-align:center;">$lte</td> <td style="text-align:center;">小于等于</td></tr> <tr><td style="text-align:center;">$or [{条件一,条件二}]</td> <td style="text-align:center;">表示或的意思，符合条件一或者条件二</td></tr> <tr><td style="text-align:center;">$inc</td> <td style="text-align:center;">表示自增，在原来数据的基础上对数据加减</td></tr></tbody></table> <h4 id="_4-删除"><a href="#_4-删除" class="header-anchor">#</a> 4. 删除</h4> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">Model.remove(condition, [callback]);</td> <td style="text-align:center;">删除符合条件的一或多个文档</td></tr> <tr><td style="text-align:center;">Model.deleteOne(condition, [callback]);</td> <td style="text-align:center;">删除符合条件的第一个文档</td></tr> <tr><td style="text-align:center;">Model.deleteMany(condition, [callback]);</td> <td style="text-align:center;">删除符合条件的多个文档</td></tr></tbody></table> <ol><li>参数<strong>condition</strong>是修改的条件</li> <li>参数<strong>callback</strong>是删除成功后要执行的回调函数</li></ol> <h4 id="_5-计数"><a href="#_5-计数" class="header-anchor">#</a> 5. 计数</h4> <table><thead><tr><th style="text-align:center;">方法</th> <th style="text-align:center;">用途</th></tr></thead> <tbody><tr><td style="text-align:center;">Model.count(condition, [callback]);</td> <td style="text-align:center;">获取当前这个集合的符合条件的文档数量</td></tr></tbody></table> <h3 id="_9-4-document的方法"><a href="#_9-4-document的方法" class="header-anchor">#</a> 9.4 Document的方法</h3> <table><thead><tr><th style="text-align:center;">方法或属性</th> <th style="text-align:center;">用途</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;">document.save([options], [callback])</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">document.update([options], [callback])</td> <td style="text-align:center;"></td> <td style="text-align:center;">collection.update不推荐使用<br>建议改用updateOne、updateMany或bulkWrite</td></tr> <tr><td style="text-align:center;">doc.get(属性)</td> <td style="text-align:center;">获取指定属性值</td> <td style="text-align:center;">doc.get(&quot;name&quot;) === doc.name</td></tr> <tr><td style="text-align:center;">doc.set(&quot;属性名&quot;,&quot;属性值&quot;)</td> <td style="text-align:center;">设置指定属性的值</td> <td style="text-align:center;">doc.set(&quot;name&quot;, &quot;猪猪&quot;) === doc.name = &quot;猪猪&quot;</td></tr> <tr><td style="text-align:center;">doc.id</td> <td style="text-align:center;">属性, 获取id</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">doc.toJSON()</td> <td style="text-align:center;">将文档对象转换成JSON</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">doc.toObject()</td> <td style="text-align:center;">将文档对象转为普通js对象</td> <td style="text-align:center;">转换后所有文档对象的属性和方法都不能用了<br>我们可以先将获取到的文档对象toObject()<br>再使用删除方法去掉某些敏感数据再输出<br>同时数据库里的敏感信息也没有被真正删除</td></tr></tbody></table></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=MongoDB" title="标签">#MongoDB</a></div> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/158cc8/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Node.js篇</div></a> <a href="/pages/93651e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Promise篇</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/158cc8/" class="prev">Node.js篇</a></span> <span class="next"><a href="/pages/93651e/">Promise篇</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/20b1c9/"><div>
            HTTP协议及缓存机制
            <!----></div></a> <span class="date">05-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/666074/"><div>
            开发环境
            <!----></div></a> <span class="date">05-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/be5c86/"><div>
            JS基础知识（一）-变量类型和计算
            <!----></div></a> <span class="date">05-28</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="pangyuetian@126.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/uploadhub" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>uploadhub | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1f1ab57c.js" defer></script><script src="/assets/js/2.091c8f37.js" defer></script><script src="/assets/js/12.366718db.js" defer></script>
  </body>
</html>
